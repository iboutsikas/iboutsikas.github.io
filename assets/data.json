---
---
{% if site.hydejack.site_data or jekyll.environment != 'development' %}
{% assign pages = site.pages | where_exp:"page","page.title != null" | where_exp:"page","page.sitemap != false" %}
{"pages": [
{% for page in pages %}{
  {% capture image %}{% if page.image %}{% include smart-url url=page.image %}{% endif %}{% endcapture %}
  {% if image            %}"image": {{       image            | jsonify }},{% endif %}
  {% if page.title       %}"title": {{       page.title       | jsonify }},{% endif %}
  {% if page.description %}"description": {{ page.description | markdownify | strip_html | jsonify }},{% endif %}
  {% if page.content     %}"content": {{     page.content     | markdownify | strip_html | jsonify }},{% endif %}
  "url": {{                                  page.url         | relative_url | jsonify }}
}{% unless forloop.last %}, {% endunless %}{% endfor %}],
 "documents": [
{% for page in site.documents %}{
  {% capture image %}{% if page.image %}{% include smart-url url=page.image %}{% endif %}{% endcapture %}
  {% if image            %}"image": {{       image            | jsonify }},{% endif %}
  {% if page.title       %}"title": {{       page.title       | jsonify }},{% endif %}
  {% if page.date        %}"date": {{        page.date        | jsonify }},{% endif %}
  {% if page.description %}"description": {{ page.description | markdownify | strip_html | jsonify }},{% endif %}
  {% if page.content     %}"content": {{     page.content     | markdownify | strip_html | jsonify }},{% endif %}
  {% if page.categories  %}"categories": {{  page.categories  | jsonify }},{% endif %}
  {% if page.tags        %}"tags": {{        page.tags        | jsonify }},{% endif %}
  {% if page.keywords    %}"keywords": {{    page.keywords    | jsonify }},{% endif %}
  "collection": {{                           page.collection  | jsonify }},
  "url": {{                                  page.url         | relative_url | jsonify }}
}{% unless forloop.last %}, {% endunless %}{% endfor %}],
 "staticFiles": [
{% for file in site.static_files %}{
  "path": {{ file.path | relative_url | jsonify }}
}{% unless forloop.last %}, {% endunless %}{% endfor %}
]}
{% else %}
{}
{% endif %}