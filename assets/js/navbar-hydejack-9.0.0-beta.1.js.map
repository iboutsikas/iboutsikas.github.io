{"version":3,"sources":["webpack:///./_js/src/navbar.js"],"names":["stylesheetReady","navbarEl","document","getElementById","height","clientHeight","offset","tv","hasCSSOM","CSSTransformValue","CSSTranslate","CSS","px","checkNavbarInactive","activeElement","classList","contains","fromEvent","passive","pipe","map","getScrollTop","filter","x","pairwise","prev","curr","merge","capture","mapTo","tap","Math","max","min","y","value","attributeStyleMap","set","style","transform","subscribe"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;;AAEA,kBAAC,aAAY;AACX,QAAMA,uDAAN;AAEA,MAAMC,QAAQ,GAAGC,QAAQ,CAACC,cAAT,CAAwB,SAAxB,CAAjB;AACA,MAAI,CAACF,QAAL,EAAe,OAJJ,CAMX;;AACA,MAAMG,MAAM,GAAGH,QAAQ,CAACI,YAAxB;AAEA,MAAIC,MAAM,GAAG,CAAb;AAEA,MAAMC,EAAE,GAAGC,gDAAQ,GAAG,IAAIC,iBAAJ,CAAsB,CAAC,IAAIC,YAAJ,CAAiBC,GAAG,CAACC,EAAJ,CAAO,CAAP,CAAjB,EAA4BD,GAAG,CAACC,EAAJ,CAAO,CAAP,CAA5B,CAAD,CAAtB,CAAH,GAAqE,IAAxF;;AAEA,MAAMC,mBAAmB,GAAG;AAAA;;AAAA,WAAM,2BAACX,QAAQ,CAACY,aAAV,0DAAC,sBAAwBC,SAAxB,CAAkCC,QAAlC,CAA2C,SAA3C,CAAD,CAAN;AAAA,GAA5B;;AAEAC,wDAAS,CAACf,QAAD,EAAW,QAAX,EAAqB;AAAEgB,WAAO,EAAE;AAAX,GAArB,CAAT,CACGC,IADH,CAEIC,0DAAG,CAACC,oDAAD,CAFP,EAGIC,6DAAM,CAAEC,CAAD,IAAOA,CAAC,IAAI,CAAb,CAHV,EAIIC,+DAAQ,EAJZ,EAKIJ,0DAAG,CAAC;AAAA,QAAC,CAACK,IAAD,EAAOC,IAAP,CAAD;AAAA,WAAkBD,IAAI,GAAGC,IAAzB;AAAA,GAAD,CALP,EAMIJ,6DAAM,CAACT,mBAAD,CANV,EAOIc,4DAAK,CAACV,sDAAS,CAAChB,QAAD,EAAW,OAAX,EAAoB;AAAE2B,WAAO,EAAE;AAAX,GAApB,CAAT,CAAgDT,IAAhD,CAAqDU,4DAAK,CAAC,IAAIzB,MAAL,CAA1D,CAAD,CAPT,EAQI0B,0DAAG,CAAEP,CAAD,IAAO;AACTjB,UAAM,IAAIiB,CAAV;AACAjB,UAAM,GAAGyB,IAAI,CAACC,GAAL,CAAS,CAAC5B,MAAV,EAAkB2B,IAAI,CAACE,GAAL,CAAS,CAAT,EAAY3B,MAAZ,CAAlB,CAAT;;AACA,QAAIE,gDAAJ,EAAc;AACZD,QAAE,CAAC,CAAD,CAAF,CAAM2B,CAAN,CAAQC,KAAR,GAAgB7B,MAAhB;AACAL,cAAQ,CAACmC,iBAAT,CAA2BC,GAA3B,CAA+B,WAA/B,EAA4C9B,EAA5C;AACD,KAHD,MAGO;AACLN,cAAQ,CAACqC,KAAT,CAAeC,SAAf,wBAAyCjC,MAAzC;AACD;AACF,GATE,CARP,EAmBGkC,SAnBH;AAoBD,CAnCD,I","file":"navbar-hydejack-9.0.0-beta.1.js","sourcesContent":["// Copyright (c) 2018 Florian Klampfer <https://qwtel.com/>\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { fromEvent } from 'rxjs';\nimport { map, filter, pairwise, merge, mapTo, tap } from 'rxjs/operators';\n\nimport { hasCSSOM, getScrollTop, stylesheetReady } from './common';\n\n(async () => {\n  await stylesheetReady;\n\n  const navbarEl = document.getElementById('_navbar');\n  if (!navbarEl) return;\n\n  // FIXME: update when size changes\n  const height = navbarEl.clientHeight;\n\n  let offset = 0;\n\n  const tv = hasCSSOM ? new CSSTransformValue([new CSSTranslate(CSS.px(0), CSS.px(0))]) : null;\n\n  const checkNavbarInactive = () => !document.activeElement?.classList.contains('nav-btn');\n\n  fromEvent(document, 'scroll', { passive: true })\n    .pipe(\n      map(getScrollTop),\n      filter((x) => x >= 0),\n      pairwise(),\n      map(([prev, curr]) => prev - curr),\n      filter(checkNavbarInactive),\n      merge(fromEvent(navbarEl, 'focus', { capture: true }).pipe(mapTo(2 * height))),\n      tap((x) => {\n        offset += x;\n        offset = Math.max(-height, Math.min(0, offset));\n        if (hasCSSOM) {\n          tv[0].y.value = offset;\n          navbarEl.attributeStyleMap.set('transform', tv);\n        } else {\n          navbarEl.style.transform = `translateY(${offset}px)`;\n        }\n      }),\n    )\n    .subscribe();\n})();\n"],"sourceRoot":""}