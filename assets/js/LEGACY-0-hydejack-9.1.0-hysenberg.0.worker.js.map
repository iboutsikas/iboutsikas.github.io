{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./_js/src/pro/search.worker.js","webpack:///./node_modules/kv-storage-polyfill/dist/kv-storage-polyfill.mjs","webpack:///./node_modules/minisearch/dist/es5m/index.js"],"names":["once","uniqBy","x","getDocuments","pages","documents","siteData","doc","docs","OPTIONS","idField","fields","storeFields","extractField","value","document","Array","SEARCH_OPTIONS","boost","title","description","categories","tags","keywords","prefix","fuzzy","combineWith","storeEvent","lastEvent","term","data","ports","port","results","miniSearch","DATA_URL","STORAGE_KEY","INDEX_KEY","storage","indexData","MiniSearch","self","search","oldKeys","key","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","_createClass","Constructor","protoProps","staticProps","prototype","_defineProperty","obj","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","arguments","source","forEach","getOwnPropertyDescriptors","defineProperties","_unsupportedIterableToArray","o","minLen","_arrayLikeToArray","n","toString","call","slice","constructor","name","from","test","arr","len","arr2","_createForOfIteratorHelperLoose","allowArrayLike","it","Symbol","iterator","isArray","done","TypeError","next","bind","TreeIterator","set","type","node","_tree","path","_proto","dive","backtrack","_last","last","LEAF","result","pop","_prefix","map","_ref","join","VALUES","KEYS","ENTRIES","array","fuzzySearch","query","maxDistance","stack","distance","innerStack","_loop","_stack$pop","edit","k","totDistance","Infinity","d","withinDistance","_ref2","a","b","ia","ib","_stack$pop2","_edit","NONE","ADD","DELETE","CHANGE","SearchableMap","tree","atPrefix","startsWith","Error","_trackDown","trackDown","undefined","last$1","parentNode","nodeKey","find","_SearchableMap","clear","_size","delete","_delete","remove","entries","fn","_iterator","_step","_step$value","fuzzyGet","maxEditDistance","get","lookup","has","hasOwnProperty","createPath","update","values","_this","_iterator2","_step2","_step2$value","fromObject","concat","toSplit","_tree$prefix","commonPrefix","Math","min","_trackDown2","cleanup","merge","_last2","_last3","_combinators","OR","AND","options","_options","defaultOptions","searchOptions","defaultSearchOptions","_index","_documentCount","_documentIds","_fieldIds","_fieldLength","_averageFieldLength","_nextId","_storedFields","addFields","add","_this$_options","tokenize","processTerm","id","shortDocumentId","addDocumentId","saveStoredFields","field","fieldValue","tokens","addFieldLength","documentCount","processedTerm","isTruthy","addTerm","addAll","_this2","addAllAsync","_this3","_options$chunkSize","chunkSize","acc","chunk","promise","Promise","resolve","_documents$reduce","reduce","then","_this4","_this$_options2","_ref3","_","longId","removeTerm","removeAll","_this5","queryString","_this6","_this$_options3","_options2","searchTokenize","searchProcessTerm","queries","termToQuery","executeQuery","combinedResults","combineResults","_ref4","docId","_ref4$","score","match","terms","uniq","assign","sort","_ref5","_ref6","autoSuggest","defaultAutoSuggestOptions","suggestions","_ref7","phrase","count","_ref8","suggestion","_ref8$","_ref9","_ref10","loadJSON","json","loadJS","JSON","parse","getDefault","optionName","js","index","nextId","documentIds","fieldIds","fieldLength","averageFieldLength","storedFields","_this7","boosts","_objectSpread2$1","getOwnProperty","_options3","boostDocument","_options3$weights","weights","_options3$weights$fuz","fuzzyWeight","_options3$weights$pre","prefixWeight","exactMatch","termResults","weightedDistance","round","_ref11","_ref11$","combinators","operator","toLowerCase","toJSON","fieldId","documentId","_objectSpread3","fieldIndex","df","ds","warnDocumentChanged","_objectSpread4","console","warn","fieldName","_ref12","weight","editDistance","_ref13","_ref14","_ref15","tf","docBoost","normalizedLength","property","totalLength","_self$_options","combined","_ref16","_ref16$","_ref17","_ref17$","tfIdf","log","termFrequency","documentFrequency","element","indexOf","string","_fieldName","split","SPACE_OR_PUNCTUATION"],"mappings":"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","file":"LEGACY-0-hydejack-9.1.0-hysenberg.0.worker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/assets/js/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./node_modules/babel-loader/lib/index.js?!./_js/src/pro/search.worker.js\");\n","// Copyright (c) 2020 Florian Klampfer <https://qwtel.com/>\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { StorageArea } from 'kv-storage-polyfill';\n\nimport MiniSearch from 'minisearch';\n\nconst once = (el, eventName) => new Promise((res) => el.addEventListener(eventName, res, { once: true }));\n\nconst uniqBy = (xs, k) => [...new Map(xs.map((x) => [x[k], x])).values()];\n\nasync function getDocuments(dataURL) {\n  const { pages = [], documents = [] } = await fetch(dataURL).then((x) => x.json());\n  const siteData = [\n    ...pages,\n    ...documents.map((doc) => {\n      if (doc.date) doc.date = new Date(doc.date);\n      return doc;\n    }),\n  ];\n  const docs = uniqBy(siteData, 'url');\n  return docs;\n}\n\n///////////////////////////////////////////////////////////////////////////////\n// Mini Search\n///////////////////////////////////////////////////////////////////////////////\n\nconst OPTIONS = {\n  idField: 'url',\n  fields: ['title', 'content', 'description', 'categories', 'tags', 'keywords'],\n  storeFields: ['url', 'title', 'description', 'image'],\n  extractField: (document, fieldName) => {\n    const value = document[fieldName];\n    return Array.isArray(value) ? value.join(' ') : value;\n  },\n};\n\nconst SEARCH_OPTIONS = {\n  boost: { title: 5, description: 2, categories: 2, tags: 2, keywords: 2 },\n  prefix: true,\n  fuzzy: 0.25,\n  combineWith: 'AND',\n};\n\nlet miniSearch;\n\nlet lastEvent;\nconst storeEvent = (e) => {\n  lastEvent = e;\n};\n\nfunction search({ data: term, ports: [port] }) {\n  const results = miniSearch.search(term, SEARCH_OPTIONS);\n  port.postMessage(results.slice(0, 20));\n}\n\n(async () => {\n  const {\n    data: { DATA_URL, STORAGE_KEY, INDEX_KEY },\n  } = await once(self, 'message');\n\n  const storage = new StorageArea(STORAGE_KEY);\n  const indexData = await storage.get(INDEX_KEY);\n  if (indexData) {\n    miniSearch = MiniSearch.loadJS(indexData, OPTIONS);\n    self.addEventListener('message', search);\n  } else {\n    self.addEventListener('message', storeEvent);\n\n    miniSearch = new MiniSearch(OPTIONS);\n    miniSearch.addAll(await getDocuments(DATA_URL));\n\n    if (lastEvent) search(lastEvent);\n\n    self.removeEventListener('message', storeEvent);\n    self.addEventListener('message', search);\n\n    (async () => {\n      // Delete old indices\n      const oldKeys = [];\n      for await (const key of storage.keys()) {\n        if (key !== INDEX_KEY) oldKeys.push(key);\n      }\n      await Promise.all(oldKeys.map((oldKey) => storage.delete(oldKey)));\n\n      // Store new index\n      await storage.set(INDEX_KEY, miniSearch.toJSON());\n    })();\n  }\n})();\n\n/*{% comment %}*/\n///////////////////////////////////////////////////////////////////////////////\n// Lunr\n///////////////////////////////////////////////////////////////////////////////\n\n// // TODO: Multi language\n// importScripts(\n//   '{{ \"/assets/bower_components/lunr/lunr.js\"                           | relative_url }}',\n//   '{{ \"/assets/bower_components/lunr-languages/lunr.stemmer.support.js\" | relative_url }}',\n//   '{{ \"/assets/bower_components/lunr-languages/lunr.de.js\"              | relative_url }}',\n// );\n\n// const INDEX_KEY = 'index--{{ site.time | date_to_xmlschema }}';\n// const storage = new StorageArea('lunr{{ '/' | relative_url }}');\n\n// // TODO: update index\n// (async () => {\n//   let { indexData, documentMap } = await storage.get(INDEX_KEY) || {};\n//   let index;\n\n//   if (indexData && documentMap) {\n//     index = lunr.Index.load(indexData);\n//   } else {\n//     const [documents, dm] = await getDocuments();\n//     documentMap = dm;\n//     index = lunr(function () {\n//       this.ref('url');\n//       this.field('title');\n//       this.field('content');\n//       this.field('description');\n//       this.field('categories');\n//       this.field('tags');\n\n//       documents.forEach(({ categories, tags, ...doc }) => this.add({\n//         ...doc,\n//         ...categories ? { categories: categories.join() } : {},\n//         ...tags ? { tags: tags.join() } : {},\n//       }));\n//     });\n\n//     // delete old indices\n//     const oldKeys = [];\n//     await forAwait(storage.keys(), (key) => { if (key !== INDEX_KEY) oldKeys.push(key); });\n//     await Promise.all(oldKeys.map(oldKey => storage.delete(oldKey)));\n\n//     // store new index\n//     await storage.set(INDEX_KEY, {\n//       indexData: index.toJSON(),\n//       documentMap,\n//     });\n//   }\n\n//   addEventListener('message', ({ data, ports: [port] }) => {\n//     const results = data !== '' ? index.search(data) : [];\n//     port.postMessage(results.map(({ ref }) => documentMap.get(ref)));\n//   });\n// })();\n\n///////////////////////////////////////////////////////////////////////////////\n// js-search\n///////////////////////////////////////////////////////////////////////////////\n\n// importScripts('{{ \"/assets/bower_components/js-search/dist/umd/js-search.js\" | relative_url }}');\n// ;(async () => {\n//   const [documents] = await getDocuments();\n\n//   const jsSearch = new JsSearch.Search('url');\n//   jsSearch.addIndex('title');\n//   jsSearch.addIndex('description');\n//   jsSearch.addIndex('content');\n//   // search.addIndex('categories');\n//   // search.addIndex('tags');\n\n//   jsSearch.addDocuments(documents);\n\n//   addEventListener('message', ({ data, ports: [port] }) => {\n//     const results = jsSearch.search(data);\n//     // console.log(results);\n//     port.postMessage(results);\n//   });\n// })();\n\n///////////////////////////////////////////////////////////////////////////////\n// Flex Search\n///////////////////////////////////////////////////////////////////////////////\n\n// importScripts('https://cdn.jsdelivr.net/gh/nextapps-de/flexsearch/dist/flexsearch.compact.js');\n// ;(async () => {\n//   const index = new FlexSearch({\n//     doc: {\n//       id: 'url',\n//       field: ['title' , 'content', 'description'],\n//       store: ['title' , 'description', 'image', 'url'],\n//     },\n//     // async: true,\n//   });\n\n//   const [documents] = await getDocuments();\n//   // console.log(documents)\n//   index.add(documents);\n\n//   addEventListener('message', ({ data, ports: [port] }) => {\n//     const results = index.search(data);\n//     // console.log(results);\n//     port.postMessage(results);\n//   });\n// })();\n/*{% endcomment %}*/\n","const t=function(){function t(){}return t.prototype.then=function(n,r){const o=new t,i=this.s;if(i){const t=1&i?n:r;if(t){try{e(o,1,t(this.v))}catch(t){e(o,2,t)}return o}return this}return this.o=function(t){try{const i=t.v;1&t.s?e(o,1,n?n(i):i):r?e(o,1,r(i)):e(o,2,i)}catch(t){e(o,2,t)}},o},t}();function e(n,r,o){if(!n.s){if(o instanceof t){if(!o.s)return void(o.o=e.bind(null,n,r));1&r&&(r=o.s),o=o.v}if(o&&o.then)return void o.then(e.bind(null,n,r),e.bind(null,n,2));n.s=r,n.v=o;const i=n.o;i&&i(n)}}var n=0,r=\"function\"==typeof WeakMap?WeakMap:function(){var t=\"function\"==typeof Symbol?Symbol(0):\"__weak$\"+ ++n;this.set=function(e,n){e[t]=n},this.get=function(e){return e[t]}};function o(t,e){return new Promise(function(n,r){t.onsuccess=function(){var r=t.result;e&&(r=e(r)),n(r)},t.onerror=function(){r(t.error)}})}function i(t,e){return o(t.openCursor(e),function(t){return t?[t.key,t.value]:[]})}function u(t){return new Promise(function(e,n){t.oncomplete=function(){e()},t.onabort=function(){n(t.error)},t.onerror=function(){n(t.error)}})}function c(t){if(!function(t){if(\"number\"==typeof t||\"string\"==typeof t)return!0;if(\"object\"==typeof t&&t){if(Array.isArray(t))return!0;if(\"setUTCFullYear\"in t)return!0;if(\"function\"==typeof ArrayBuffer&&ArrayBuffer.isView(t))return!0;if(\"byteLength\"in t&&\"length\"in t)return!0}return!1}(t))throw Error(\"kv-storage: The given value is not allowed as a key\")}var f={};function s(t,e){return i(t,a(e))}function a(t){return t===f?IDBKeyRange.lowerBound(-Infinity):IDBKeyRange.lowerBound(t,!0)}var v=new r,h=new r,l=new r,y=new r,d=function(){};function p(n,r){return r(function(r,o){try{function u(){return h.set(n,f),l.set(n,void 0),{value:d,done:void 0===f}}var c=h.get(n);if(void 0===c)return Promise.resolve({value:void 0,done:!0});var f,v,d,p=function(n,r){var o,i=-1;t:{for(var u=0;u<r.length;u++){var c=r[u][0];if(c){var f=c();if(f&&f.then)break t;if(f===n){i=u;break}}else i=u}if(-1!==i){do{for(var s=r[i][1];!s;)s=r[++i][1];var a=s();if(a&&a.then){o=!0;break t}var v=r[i][2];i++}while(v&&!v());return a}}const h=new t,l=e.bind(null,h,2);return(o?a.then(y):f.then(function t(o){for(;;){if(o===n){i=u;break}if(++u===r.length){if(-1!==i)break;return void e(h,1,s)}if(c=r[u][0]){if((o=c())&&o.then)return void o.then(t).then(void 0,l)}else i=u}do{for(var f=r[i][1];!f;)f=r[++i][1];var s=f();if(s&&s.then)return void s.then(y).then(void 0,l);var a=r[i][2];i++}while(a&&!a());e(h,1,s)})).then(void 0,l),h;function y(t){for(;;){var n=r[i][2];if(!n||n())break;for(var o=r[++i][1];!o;)o=r[++i][1];if((t=o())&&t.then)return void t.then(y).then(void 0,l)}e(h,1,t)}}(y.get(n),[[function(){return\"keys\"},function(){return Promise.resolve(function(t,e){return i(t,a(e)).then(function(t){return t[0]})}(o,c)).then(function(t){d=f=t})}],[function(){return\"values\"},function(){return Promise.resolve(s(o,c)).then(function(t){var e;f=(e=t)[0],d=v=e[1]})}],[function(){return\"entries\"},function(){return Promise.resolve(s(o,c)).then(function(t){var e;v=(e=t)[1],d=void 0===(f=e[0])?void 0:[f,v]})}]]);return Promise.resolve(p&&p.then?p.then(u):u())}catch(t){return Promise.reject(t)}})}function m(t,e){var n=new d;return y.set(n,t),v.set(n,e),h.set(n,f),l.set(n,void 0),n}d.prototype.return=function(){h.set(this,void 0)},d.prototype.next=function(){var t=this,e=v.get(this);if(!e)return Promise.reject(new TypeError(\"Invalid this value\"));var n,r=l.get(this);return n=void 0!==r?r.then(function(){return p(t,e)}):p(this,e),l.set(this,n),n},\"function\"==typeof Symbol&&Symbol.asyncIterator&&(d.prototype[Symbol.asyncIterator]=function(){return this});var b=function(t,e,n){try{return null===w.get(t)&&function(t){var e=g.get(t);w.set(t,new Promise(function(n,r){var o=self.indexedDB.open(e,1);o.onsuccess=function(){var i=o.result;(function(t,e,n){if(1!==t.objectStoreNames.length)return n(S(e)),!1;if(t.objectStoreNames[0]!==P)return n(S(e)),!1;var r=t.transaction(P,\"readonly\").objectStore(P);return!(r.autoIncrement||r.keyPath||r.indexNames.length)||(n(S(e)),!1)})(i,e,r)&&(i.onclose=function(){w.set(t,null)},i.onversionchange=function(){i.close(),w.set(t,null)},n(i))},o.onerror=function(){return r(o.error)},o.onupgradeneeded=function(){try{o.result.createObjectStore(P)}catch(t){r(t)}}}))}(t),Promise.resolve(w.get(t)).then(function(t){var r=t.transaction(P,e),o=r.objectStore(P);return n(r,o)})}catch(t){return Promise.reject(t)}},g=new r,w=new r,P=\"store\",k=function(t){var e=\"kv-storage:\"+t;w.set(this,null),g.set(this,e),this.backingStore={database:e,store:P,version:1}};function S(t){return new Error('kv-storage: database \"'+t+'\" corrupted')}k.prototype.set=function(t,e){try{return c(t),b(this,\"readwrite\",function(n,r){return void 0===e?r.delete(t):r.put(e,t),u(n)})}catch(t){return Promise.reject(t)}},k.prototype.get=function(t){try{return c(t),b(this,\"readonly\",function(e,n){return o(n.get(t))})}catch(t){return Promise.reject(t)}},k.prototype.delete=function(t){try{return c(t),b(this,\"readwrite\",function(e,n){return n.delete(t),u(e)})}catch(t){return Promise.reject(t)}},k.prototype.clear=function(){try{var t=this;function e(){function e(){return o(self.indexedDB.deleteDatabase(g.get(t)))}var r=function(){if(n){try{n.close()}catch(t){}return Promise.resolve(new Promise(setTimeout)).then(function(){})}}();return r&&r.then?r.then(e):e()}var n,r=w.get(t),i=function(){if(null!==r){function e(){w.set(t,null)}var o=function(t,e){try{var o=Promise.resolve(r).then(function(t){n=t})}catch(t){return}return o&&o.then?o.then(void 0,function(){}):o}();return o&&o.then?o.then(e):e()}}();return i&&i.then?i.then(e):e()}catch(t){return Promise.reject(t)}},k.prototype.keys=function(){var t=this;return m(\"keys\",function(e){return b(t,\"readonly\",e)})},k.prototype.values=function(){var t=this;return m(\"values\",function(e){return b(t,\"readonly\",e)})},k.prototype.entries=function(){var t=this;return m(\"entries\",function(e){return b(t,\"readonly\",e)})},\"function\"==typeof Symbol&&Symbol.asyncIterator&&(k.prototype[Symbol.asyncIterator]=k.prototype.entries);export default new k(\"default\");export{k as StorageArea};\n//# sourceMappingURL=kv-storage-polyfill.mjs.map\n","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      return function () {\n        if (i >= o.length) return {\n          done: true\n        };\n        return {\n          done: false,\n          value: o[i++]\n        };\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  it = o[Symbol.iterator]();\n  return it.next.bind(it);\n}\n\n/**\n* @private\n*/\nvar TreeIterator = /*#__PURE__*/function () {\n  function TreeIterator(set, type) {\n    var node = set._tree;\n    var keys = Object.keys(node);\n    this.set = set;\n    this.type = type;\n    this.path = keys.length > 0 ? [{\n      node: node,\n      keys: keys\n    }] : [];\n  }\n\n  var _proto = TreeIterator.prototype;\n\n  _proto.next = function next() {\n    var value = this.dive();\n    this.backtrack();\n    return value;\n  };\n\n  _proto.dive = function dive() {\n    if (this.path.length === 0) {\n      return {\n        done: true\n      };\n    }\n\n    var _last = last(this.path),\n        node = _last.node,\n        keys = _last.keys;\n\n    if (last(keys) === LEAF) {\n      return {\n        done: false,\n        value: this.result()\n      };\n    }\n\n    this.path.push({\n      node: node[last(keys)],\n      keys: Object.keys(node[last(keys)])\n    });\n    return this.dive();\n  };\n\n  _proto.backtrack = function backtrack() {\n    if (this.path.length === 0) {\n      return;\n    }\n\n    last(this.path).keys.pop();\n\n    if (last(this.path).keys.length > 0) {\n      return;\n    }\n\n    this.path.pop();\n    this.backtrack();\n  };\n\n  _proto.key = function key() {\n    return this.set._prefix + this.path.map(function (_ref) {\n      var keys = _ref.keys;\n      return last(keys);\n    }).filter(function (key) {\n      return key !== LEAF;\n    }).join('');\n  };\n\n  _proto.value = function value() {\n    return last(this.path).node[LEAF];\n  };\n\n  _proto.result = function result() {\n    if (this.type === VALUES) {\n      return this.value();\n    }\n\n    if (this.type === KEYS) {\n      return this.key();\n    }\n\n    return [this.key(), this.value()];\n  };\n\n  _proto[Symbol.iterator] = function () {\n    return this;\n  };\n\n  return TreeIterator;\n}();\n/** @ignore */\n\n\nvar ENTRIES = 'ENTRIES';\n/** @ignore */\n\nvar KEYS = 'KEYS';\n/** @ignore */\n\nvar VALUES = 'VALUES';\n/** @ignore */\n\nvar LEAF = '';\n\nvar last = function last(array) {\n  return array[array.length - 1];\n};\n\n/**\n* @ignore\n*/\n\nvar fuzzySearch = function fuzzySearch(node, query, maxDistance) {\n  var stack = [{\n    distance: 0,\n    i: 0,\n    key: '',\n    node: node\n  }];\n  var results = {};\n  var innerStack = [];\n\n  var _loop = function _loop() {\n    var _stack$pop = stack.pop(),\n        node = _stack$pop.node,\n        distance = _stack$pop.distance,\n        key = _stack$pop.key,\n        i = _stack$pop.i,\n        edit = _stack$pop.edit;\n\n    Object.keys(node).forEach(function (k) {\n      if (k === LEAF) {\n        var totDistance = distance + (query.length - i);\n\n        var _ref = results[key] || [null, Infinity],\n            d = _ref[1];\n\n        if (totDistance <= maxDistance && totDistance < d) {\n          results[key] = [node[k], totDistance];\n        }\n      } else {\n        withinDistance(query, k, maxDistance - distance, i, edit, innerStack).forEach(function (_ref2) {\n          var d = _ref2.distance,\n              i = _ref2.i,\n              edit = _ref2.edit;\n          stack.push({\n            node: node[k],\n            distance: distance + d,\n            key: key + k,\n            i: i,\n            edit: edit\n          });\n        });\n      }\n    });\n  };\n\n  while (stack.length > 0) {\n    _loop();\n  }\n\n  return results;\n};\n/**\n* @ignore\n*/\n\nvar withinDistance = function withinDistance(a, b, maxDistance, i, edit, stack) {\n  stack.push({\n    distance: 0,\n    ia: i,\n    ib: 0,\n    edit: edit\n  });\n  var results = [];\n\n  while (stack.length > 0) {\n    var _stack$pop2 = stack.pop(),\n        distance = _stack$pop2.distance,\n        ia = _stack$pop2.ia,\n        ib = _stack$pop2.ib,\n        _edit = _stack$pop2.edit;\n\n    if (ib === b.length) {\n      results.push({\n        distance: distance,\n        i: ia,\n        edit: _edit\n      });\n      continue;\n    }\n\n    if (a[ia] === b[ib]) {\n      stack.push({\n        distance: distance,\n        ia: ia + 1,\n        ib: ib + 1,\n        edit: NONE\n      });\n    } else {\n      if (distance >= maxDistance) {\n        continue;\n      }\n\n      if (_edit !== ADD) {\n        stack.push({\n          distance: distance + 1,\n          ia: ia,\n          ib: ib + 1,\n          edit: DELETE\n        });\n      }\n\n      if (ia < a.length) {\n        if (_edit !== DELETE) {\n          stack.push({\n            distance: distance + 1,\n            ia: ia + 1,\n            ib: ib,\n            edit: ADD\n          });\n        }\n\n        if (_edit !== DELETE && _edit !== ADD) {\n          stack.push({\n            distance: distance + 1,\n            ia: ia + 1,\n            ib: ib + 1,\n            edit: CHANGE\n          });\n        }\n      }\n    }\n  }\n\n  return results;\n};\nvar NONE = 0;\nvar CHANGE = 1;\nvar ADD = 2;\nvar DELETE = 3;\n\n/**\n* A class implementing the same interface as a standard JavaScript `Map` with\n* string keys, but adding support for efficiently searching entries with prefix\n* or fuzzy search. This is the class internally used by `MiniSearch` as the\n* inverted index data structure. The implementation is a radix tree (compressed\n* prefix tree).\n*\n* @implements {Map}\n*/\n\nvar SearchableMap = /*#__PURE__*/function () {\n  function SearchableMap(tree, prefix) {\n    if (tree === void 0) {\n      tree = {};\n    }\n\n    if (prefix === void 0) {\n      prefix = '';\n    }\n\n    /** @private */\n    this._tree = tree;\n    /** @private */\n\n    this._prefix = prefix;\n  }\n  /**\n  * Creates and returns a mutable view of this `SearchableMap`, containing only\n  * entries that share the given prefix.\n  *\n  * @example\n  * let map = new SearchableMap()\n  * map.set(\"unicorn\", 1)\n  * map.set(\"universe\", 2)\n  * map.set(\"university\", 3)\n  * map.set(\"unique\", 4)\n  * map.set(\"hello\", 5)\n  *\n  * let uni = map.atPrefix(\"uni\")\n  * uni.get(\"unique\") // => 4\n  * uni.get(\"unicorn\") // => 1\n  * uni.get(\"hello\") // => undefined\n  *\n  * let univer = map.atPrefix(\"univer\")\n  * univer.get(\"unique\") // => undefined\n  * univer.get(\"universe\") // => 2\n  * univer.get(\"university\") // => 3\n  *\n  * @param {string} prefix - The prefix\n  * @return {SearchableMap} A `SearchableMap` representing a mutable view of the original Map at the given prefix\n  */\n\n\n  var _proto = SearchableMap.prototype;\n\n  _proto.atPrefix = function atPrefix(prefix) {\n    if (!prefix.startsWith(this._prefix)) {\n      throw new Error('Mismatched prefix');\n    }\n\n    var _trackDown = trackDown(this._tree, prefix.slice(this._prefix.length)),\n        node = _trackDown[0],\n        path = _trackDown[1];\n\n    if (node === undefined) {\n      var _last = last$1(path),\n          parentNode = _last[0],\n          key = _last[1];\n\n      var nodeKey = Object.keys(parentNode).find(function (k) {\n        return k !== LEAF && k.startsWith(key);\n      });\n\n      if (nodeKey !== undefined) {\n        var _SearchableMap;\n\n        return new SearchableMap((_SearchableMap = {}, _SearchableMap[nodeKey.slice(key.length)] = parentNode[nodeKey], _SearchableMap), prefix);\n      }\n    }\n\n    return new SearchableMap(node || {}, prefix);\n  }\n  /**\n  * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/clear\n  * @return {undefined}\n  */\n  ;\n\n  _proto.clear = function clear() {\n    delete this._size;\n    this._tree = {};\n  }\n  /**\n  * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/delete\n  * @param {string} key\n  * @return {undefined}\n  */\n  ;\n\n  _proto.delete = function _delete(key) {\n    delete this._size;\n    return remove(this._tree, key);\n  }\n  /**\n  * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/entries\n  * @return {Iterator}\n  */\n  ;\n\n  _proto.entries = function entries() {\n    return new TreeIterator(this, ENTRIES);\n  }\n  /**\n   * @callback SearchableMap~forEachFn\n   * @param {string} key - Key\n   * @param {any} value - Value associated to key\n   * @return any\n   */\n\n  /**\n  * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/forEach\n  * @param {SearchableMap~forEachFn} fn\n  * @return {undefined}\n  */\n  ;\n\n  _proto.forEach = function forEach(fn) {\n    for (var _iterator = _createForOfIteratorHelperLoose(this), _step; !(_step = _iterator()).done;) {\n      var _step$value = _step.value,\n          key = _step$value[0],\n          value = _step$value[1];\n      fn(key, value, this);\n    }\n  }\n  /**\n  * Returns a key-value object of all the entries that have a key within the\n  * given edit distance from the search key. The keys of the returned object are\n  * the matching keys, while the values are two-elements arrays where the first\n  * element is the value associated to the key, and the second is the edit\n  * distance of the key to the search key.\n  *\n  * @example\n  * let map = new SearchableMap()\n  * map.set('hello', 'world')\n  * map.set('hell', 'yeah')\n  * map.set('ciao', 'mondo')\n  *\n  * // Get all entries that match the key 'hallo' with a maximum edit distance of 2\n  * map.fuzzyGet('hallo', 2)\n  * // => { \"hello\": [\"world\", 1], \"hell\": [\"yeah\", 2] }\n  *\n  * // In the example, the \"hello\" key has value \"world\" and edit distance of 1\n  * // (change \"e\" to \"a\"), the key \"hell\" has value \"yeah\" and edit distance of 2\n  * // (change \"e\" to \"a\", delete \"o\")\n  *\n  * @param {string} key - The search key\n  * @param {number} maxEditDistance - The maximum edit distance\n  * @return {Object<string, Array>} A key-value object of the matching keys to their value and edit distance\n  */\n  ;\n\n  _proto.fuzzyGet = function fuzzyGet(key, maxEditDistance) {\n    return fuzzySearch(this._tree, key, maxEditDistance);\n  }\n  /**\n  * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/get\n  * @param {string} key\n  * @return {any}\n  */\n  ;\n\n  _proto.get = function get(key) {\n    var node = lookup(this._tree, key);\n    return node !== undefined ? node[LEAF] : undefined;\n  }\n  /**\n  * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/has\n  * @param {string} key\n  * @return {boolean}\n  */\n  ;\n\n  _proto.has = function has(key) {\n    var node = lookup(this._tree, key);\n    return node !== undefined && node.hasOwnProperty(LEAF);\n  }\n  /**\n  * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/keys\n  * @return {Iterator}\n  */\n  ;\n\n  _proto.keys = function keys() {\n    return new TreeIterator(this, KEYS);\n  }\n  /**\n  * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/set\n  * @param {string} key\n  * @param {any} value\n  * @return {SearchableMap} The `SearchableMap` itself, to allow chaining\n  */\n  ;\n\n  _proto.set = function set(key, value) {\n    if (typeof key !== 'string') {\n      throw new Error('key must be a string');\n    }\n\n    delete this._size;\n    var node = createPath(this._tree, key);\n    node[LEAF] = value;\n    return this;\n  }\n  /**\n  * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/size\n  * @type {number}\n  */\n  ;\n\n  /**\n   * @callback SearchableMap~updateFn\n   * @param {any} currentValue - The current value\n   * @return any - the updated value\n   */\n\n  /**\n  * Updates the value at the given key using the provided function. The function\n  * is called with the current value at the key, and its return value is used as\n  * the new value to be set.\n  *\n  * @example\n  * // Increment the current value by one\n  * searchableMap.update('somekey', (currentValue) => currentValue == null ? 0 : currentValue + 1)\n  *\n  * @param {string} key - The key\n  * @param {SearchableMap~updateFn} fn - The function used to compute the new value from the current one\n  * @return {SearchableMap} The `SearchableMap` itself, to allow chaining\n  */\n  _proto.update = function update(key, fn) {\n    if (typeof key !== 'string') {\n      throw new Error('key must be a string');\n    }\n\n    delete this._size;\n    var node = createPath(this._tree, key);\n    node[LEAF] = fn(node[LEAF]);\n    return this;\n  }\n  /**\n  * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/values\n  * @return {Iterator}\n  */\n  ;\n\n  _proto.values = function values() {\n    return new TreeIterator(this, VALUES);\n  }\n  /**\n  * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/@@iterator\n  * @return {Iterator}\n  */\n  ;\n\n  _proto[Symbol.iterator] = function () {\n    return this.entries();\n  };\n\n  _createClass(SearchableMap, [{\n    key: \"size\",\n    get: function get() {\n      var _this = this;\n\n      if (this._size) {\n        return this._size;\n      }\n      /** @ignore */\n\n\n      this._size = 0;\n      this.forEach(function () {\n        _this._size += 1;\n      });\n      return this._size;\n    }\n  }]);\n\n  return SearchableMap;\n}();\n/**\n* Creates a `SearchableMap` from an `Iterable` of entries\n*\n* @param {Iterable|Array} entries - Entries to be inserted in the `SearchableMap`\n* @return {SearchableMap} A new `SearchableMap` with the given entries\n**/\n\n\nSearchableMap.from = function (entries) {\n  var tree = new SearchableMap();\n\n  for (var _iterator2 = _createForOfIteratorHelperLoose(entries), _step2; !(_step2 = _iterator2()).done;) {\n    var _step2$value = _step2.value,\n        key = _step2$value[0],\n        value = _step2$value[1];\n    tree.set(key, value);\n  }\n\n  return tree;\n};\n/**\n* Creates a `SearchableMap` from the iterable properties of a JavaScript object\n*\n* @param {Object} object - Object of entries for the `SearchableMap`\n* @return {SearchableMap} A new `SearchableMap` with the given entries\n**/\n\n\nSearchableMap.fromObject = function (object) {\n  return SearchableMap.from(Object.entries(object));\n};\n\nvar trackDown = function trackDown(tree, key, path) {\n  if (path === void 0) {\n    path = [];\n  }\n\n  if (key.length === 0) {\n    return [tree, path];\n  }\n\n  var nodeKey = Object.keys(tree).find(function (k) {\n    return k !== LEAF && key.startsWith(k);\n  });\n\n  if (nodeKey === undefined) {\n    return trackDown(undefined, '', [].concat(path, [[tree, key]]));\n  }\n\n  return trackDown(tree[nodeKey], key.slice(nodeKey.length), [].concat(path, [[tree, nodeKey]]));\n};\n\nvar lookup = function lookup(tree, key) {\n  if (key.length === 0) {\n    return tree;\n  }\n\n  var nodeKey = Object.keys(tree).find(function (k) {\n    return k !== LEAF && key.startsWith(k);\n  });\n\n  if (nodeKey === undefined) {\n    return undefined;\n  }\n\n  return lookup(tree[nodeKey], key.slice(nodeKey.length));\n};\n\nvar createPath = function createPath(tree, key) {\n  if (key.length === 0) {\n    return tree;\n  }\n\n  var nodeKey = Object.keys(tree).find(function (k) {\n    return k !== LEAF && key.startsWith(k);\n  });\n\n  if (nodeKey === undefined) {\n    var toSplit = Object.keys(tree).find(function (k) {\n      return k !== LEAF && k.startsWith(key[0]);\n    });\n\n    if (toSplit === undefined) {\n      tree[key] = {};\n    } else {\n      var _tree$prefix;\n\n      var prefix = commonPrefix(key, toSplit);\n      tree[prefix] = (_tree$prefix = {}, _tree$prefix[toSplit.slice(prefix.length)] = tree[toSplit], _tree$prefix);\n      delete tree[toSplit];\n      return createPath(tree[prefix], key.slice(prefix.length));\n    }\n\n    return tree[key];\n  }\n\n  return createPath(tree[nodeKey], key.slice(nodeKey.length));\n};\n\nvar commonPrefix = function commonPrefix(a, b, i, length, prefix) {\n  if (i === void 0) {\n    i = 0;\n  }\n\n  if (length === void 0) {\n    length = Math.min(a.length, b.length);\n  }\n\n  if (prefix === void 0) {\n    prefix = '';\n  }\n\n  if (i >= length) {\n    return prefix;\n  }\n\n  if (a[i] !== b[i]) {\n    return prefix;\n  }\n\n  return commonPrefix(a, b, i + 1, length, prefix + a[i]);\n};\n\nvar remove = function remove(tree, key) {\n  var _trackDown2 = trackDown(tree, key),\n      node = _trackDown2[0],\n      path = _trackDown2[1];\n\n  if (node === undefined) {\n    return;\n  }\n\n  delete node[LEAF];\n  var keys = Object.keys(node);\n\n  if (keys.length === 0) {\n    cleanup(path);\n  }\n\n  if (keys.length === 1) {\n    merge(path, keys[0], node[keys[0]]);\n  }\n};\n\nvar cleanup = function cleanup(path) {\n  if (path.length === 0) {\n    return;\n  }\n\n  var _last2 = last$1(path),\n      node = _last2[0],\n      key = _last2[1];\n\n  delete node[key];\n\n  if (Object.keys(node).length === 0) {\n    cleanup(path.slice(0, -1));\n  }\n};\n\nvar merge = function merge(path, key, value) {\n  if (path.length === 0) {\n    return;\n  }\n\n  var _last3 = last$1(path),\n      node = _last3[0],\n      nodeKey = _last3[1];\n\n  node[nodeKey + key] = value;\n  delete node[nodeKey];\n};\n\nvar last$1 = function last(array) {\n  return array[array.length - 1];\n};\n\nvar _combinators;\nvar OR = 'or';\nvar AND = 'and';\n/**\n* MiniSearch is the main entrypoint class, and represents a full-text search\n* engine.\n*\n* @example\n* const documents = [\n*   {\n*     id: 1,\n*     title: 'Moby Dick',\n*     text: 'Call me Ishmael. Some years ago...',\n*     category: 'fiction'\n*   },\n*   {\n*     id: 2,\n*     title: 'Zen and the Art of Motorcycle Maintenance',\n*     text: 'I can see by my watch...',\n*     category: 'fiction'\n*   },\n*   {\n*     id: 3,\n*     title: 'Neuromancer',\n*     text: 'The sky above the port was...',\n*     category: 'fiction'\n*   },\n*   {\n*     id: 4,\n*     title: 'Zen and the Art of Archery',\n*     text: 'At first sight it must seem...',\n*     category: 'non-fiction'\n*   },\n*   // ...and more\n* ]\n*\n* // Create a search engine that indexes the 'title' and 'text' fields for\n* // full-text search. Search results will include 'title' and 'category' (plus the\n* // id field, that is always stored and returned)\n* const miniSearch = MiniSearch.new({\n*   fields: ['title', 'text'],\n*   storeFields: ['title', 'category']\n* })\n*\n* // Add documents to the index\n* miniSearch.addAll(documents)\n*\n* // Search for documents:\n* let results = miniSearch.search('zen art motorcycle')\n* // => [\n*   { id: 2, title: 'Zen and the Art of Motorcycle Maintenance', category: 'fiction', score: 2.77258 },\n*   { id: 4, title: 'Zen and the Art of Archery', category: 'non-fiction', score: 1.38629 }\n* ]\n* */\n\nvar MiniSearch = /*#__PURE__*/function () {\n  /**\n   * @callback MiniSearch~extractField\n   * @param {Object} document - A document object\n   * @param {string} fieldName - Name of the field to extract\n   * @return string - Value of the field\n   */\n\n  /**\n   * @callback MiniSearch~tokenize\n   * @param {string} text - Text to tokenize\n   * @param {?string} fieldName - Name of the field to tokenize\n   * @return string[] - Tokenized terms\n   */\n\n  /**\n   * @callback MiniSearch~processTerm\n   * @param {string} text - The text to tokenize\n   * @param {?string} fieldName - The name of the field to tokenize\n   * @return string|null|undefined|false - Processed term, or a falsy value to discard the term\n   */\n\n  /**\n  * @param {Object} options - Configuration options\n  * @param {Array<string>} options.fields - Fields to be indexed. Required.\n  * @param {string} [options.idField='id'] - ID field, uniquely identifying a document\n  * @param {Array<string>} [options.storeFields] - Fields to store, so that search results would include them. By default none, so resuts would only contain the id field.\n  * @param {MiniSearch~extractField} [options.extractField] - Function used to get the value of a field in a document\n  * @param {MiniSearch~tokenize} [options.tokenize] - Function used to split a field into individual terms\n  * @param {MiniSearch~processTerm} [options.processTerm] - Function used to process a term before indexing it or searching\n  * @param {Object} [options.searchOptions] - Default search options (see the `search` method for details)\n  *\n  * @example\n  * // Create a search engine that indexes the 'title' and 'text' fields of your\n  * // documents:\n  * const miniSearch = MiniSearch.new({ fields: ['title', 'text'] })\n  *\n  * @example\n  * // Your documents are assumed to include a unique 'id' field, but if you want\n  * // to use a different field for document identification, you can set the\n  * // 'idField' option:\n  * const miniSearch = MiniSearch.new({ idField: 'key', fields: ['title', 'text'] })\n  *\n  * @example\n  * // The full set of options (here with their default value) is:\n  * const miniSearch = MiniSearch.new({\n  *   // idField: field that uniquely identifies a document\n  *   idField: 'id',\n  *\n  *   // extractField: function used to get the value of a field in a document.\n  *   // By default, it assumes the document is a flat object with field names as\n  *   // property keys and field values as string property values, but custom logic\n  *   // can be implemented by setting this option to a custom extractor function.\n  *   extractField: (document, fieldName) => document[fieldName],\n  *\n  *   // tokenize: function used to split fields into individual terms. By\n  *   // default, it is also used to tokenize search queries, unless a specific\n  *   // `tokenize` search option is supplied. When tokenizing an indexed field,\n  *   // the field name is passed as the second argument.\n  *   tokenize: (string, _fieldName) => string.split(SPACE_OR_PUNCTUATION),\n  *\n  *   // processTerm: function used to process each tokenized term before\n  *   // indexing. It can be used for stemming and normalization. Return a falsy\n  *   // value in order to discard a term. By default, it is also used to process\n  *   // search queries, unless a specific `processTerm` option is supplied as a\n  *   // search option. When processing a term from a indexed field, the field\n  *   // name is passed as the second argument.\n  *   processTerm: (term, _fieldName) => term.toLowerCase(),\n  *\n  *   // searchOptions: default search options, see the `search` method for\n  *   // details\n  *   searchOptions: undefined,\n  *\n  *   // fields: document fields to be indexed. Mandatory, but not set by default\n  *   fields: undefined\n  *\n  *   // storeFields: document fields to be stored and returned as part of the\n  *   // search results.\n  *   storeFields: []\n  * })\n  */\n  function MiniSearch(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    /** @private */\n    this._options = _objectSpread2(_objectSpread2({}, defaultOptions), options);\n    this._options.searchOptions = _objectSpread2(_objectSpread2({}, defaultSearchOptions), this._options.searchOptions || {});\n    var fields = this._options.fields;\n\n    if (fields == null) {\n      throw new Error('MiniSearch: option \"fields\" must be provided');\n    }\n    /** @private */\n\n\n    this._index = new SearchableMap();\n    /** @private */\n\n    this._documentCount = 0;\n    /** @private */\n\n    this._documentIds = {};\n    /** @private */\n\n    this._fieldIds = {};\n    /** @private */\n\n    this._fieldLength = {};\n    /** @private */\n\n    this._averageFieldLength = {};\n    /** @private */\n\n    this._nextId = 0;\n    /** @private */\n\n    this._storedFields = {};\n    addFields(this, fields);\n  }\n  /**\n  * Adds a document to the index\n  *\n  * @param {Object} document - the document to be indexed\n  */\n\n\n  var _proto = MiniSearch.prototype;\n\n  _proto.add = function add(document) {\n    var _this = this;\n\n    var _this$_options = this._options,\n        extractField = _this$_options.extractField,\n        tokenize = _this$_options.tokenize,\n        processTerm = _this$_options.processTerm,\n        fields = _this$_options.fields,\n        idField = _this$_options.idField;\n    var id = extractField(document, idField);\n\n    if (id == null) {\n      throw new Error(\"MiniSearch: document does not have ID field \\\"\" + idField + \"\\\"\");\n    }\n\n    var shortDocumentId = addDocumentId(this, id);\n    saveStoredFields(this, shortDocumentId, document);\n    fields.forEach(function (field) {\n      var fieldValue = extractField(document, field);\n\n      if (fieldValue == null) {\n        return;\n      }\n\n      var tokens = tokenize(fieldValue.toString(), field);\n      addFieldLength(_this, shortDocumentId, _this._fieldIds[field], _this.documentCount - 1, tokens.length);\n      tokens.forEach(function (term) {\n        var processedTerm = processTerm(term, field);\n\n        if (isTruthy(processedTerm)) {\n          addTerm(_this, _this._fieldIds[field], shortDocumentId, processedTerm);\n        }\n      });\n    });\n  }\n  /**\n  * Adds all the given documents to the index\n  *\n  * @param {Object[]} documents - an array of documents to be indexed\n  */\n  ;\n\n  _proto.addAll = function addAll(documents) {\n    var _this2 = this;\n\n    documents.forEach(function (document) {\n      return _this2.add(document);\n    });\n  }\n  /**\n  * Adds all the given documents to the index asynchronously.\n  *\n  * Returns a promise that resolves to undefined when the indexing is done. This\n  * method is useful when index many documents, to avoid blocking the main\n  * thread. The indexing is performed asynchronously and in chunks.\n  *\n  * @param {Object[]} documents - an array of documents to be indexed\n  * @param {Object} [options] - Configuration options\n  * @param {number} [options.chunkSize] - Size of the document chunks indexed, 10 by default\n  * @return {Promise} A promise resolving to `null` when the indexing is done\n  */\n  ;\n\n  _proto.addAllAsync = function addAllAsync(documents, options) {\n    var _this3 = this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _options = options,\n        _options$chunkSize = _options.chunkSize,\n        chunkSize = _options$chunkSize === void 0 ? 10 : _options$chunkSize;\n    var acc = {\n      chunk: [],\n      promise: Promise.resolve(null)\n    };\n\n    var _documents$reduce = documents.reduce(function (_ref, document, i) {\n      var chunk = _ref.chunk,\n          promise = _ref.promise;\n      chunk.push(document);\n\n      if ((i + 1) % chunkSize === 0) {\n        return {\n          chunk: [],\n          promise: promise.then(function () {\n            return _this3.addAll(chunk);\n          })\n        };\n      } else {\n        return {\n          chunk: chunk,\n          promise: promise\n        };\n      }\n    }, acc),\n        chunk = _documents$reduce.chunk,\n        promise = _documents$reduce.promise;\n\n    return promise.then(function () {\n      return _this3.addAll(chunk);\n    });\n  }\n  /**\n  * Removes the given document from the index.\n  *\n  * The document to delete must NOT have changed between indexing and deletion,\n  * otherwise the index will be corrupted. Therefore, when reindexing a document\n  * after a change, the correct order of operations is:\n  *\n  *   1. remove old version\n  *   2. apply changes\n  *   3. index new version\n  *\n  * @param {Object} document - the document to be removed\n  */\n  ;\n\n  _proto.remove = function remove(document) {\n    var _this4 = this;\n\n    var _this$_options2 = this._options,\n        tokenize = _this$_options2.tokenize,\n        processTerm = _this$_options2.processTerm,\n        extractField = _this$_options2.extractField,\n        fields = _this$_options2.fields,\n        idField = _this$_options2.idField;\n    var id = extractField(document, idField);\n\n    if (id == null) {\n      throw new Error(\"MiniSearch: document does not have ID field \\\"\" + idField + \"\\\"\");\n    }\n\n    var _ref2 = Object.entries(this._documentIds).find(function (_ref3) {\n      var _ = _ref3[0],\n          longId = _ref3[1];\n      return id === longId;\n    }) || [],\n        shortDocumentId = _ref2[0];\n\n    if (shortDocumentId == null) {\n      throw new Error(\"MiniSearch: cannot remove document with ID \" + id + \": it is not in the index\");\n    }\n\n    fields.forEach(function (field) {\n      var fieldValue = extractField(document, field);\n\n      if (fieldValue == null) {\n        return;\n      }\n\n      var tokens = tokenize(fieldValue.toString(), field);\n      tokens.forEach(function (term) {\n        var processedTerm = processTerm(term, field);\n\n        if (isTruthy(processedTerm)) {\n          removeTerm(_this4, _this4._fieldIds[field], shortDocumentId, processedTerm);\n        }\n      });\n    });\n    delete this._storedFields[shortDocumentId];\n    delete this._documentIds[shortDocumentId];\n    this._documentCount -= 1;\n  }\n  /**\n  * Removes all the given documents from the index. If called with no arguments,\n  * it removes _all_ documents from the index.\n  *\n  * @param {Array<Object>} [documents] - the documents to be removed\n  */\n  ;\n\n  _proto.removeAll = function removeAll(documents) {\n    var _this5 = this;\n\n    if (arguments.length === 0) {\n      this._index = new SearchableMap();\n      this._documentCount = 0;\n      this._documentIds = {};\n      this._fieldLength = {};\n      this._averageFieldLength = {};\n      this._storedFields = {};\n      this._nextId = 0;\n    } else {\n      documents.forEach(function (document) {\n        return _this5.remove(document);\n      });\n    }\n  }\n  /**\n   * @callback MiniSearch~prefixFn\n   * @param {string} term - Search term\n   * @param {number} i - Index of the term in the query terms array\n   * @param {string[]} terms - Array of all query terms\n   * @return boolean - `true` to perform prefix search, `false` to not perform it\n   */\n\n  /**\n   * @callback MiniSearch~fuzzyFn\n   * @param {string} term - Search term\n   * @param {number} i - Index of the search term in the tokenized search query\n   * @param {string[]} terms - Array of all query terms\n   * @return number|false - Maximum edit distance, or `false` to not perform fuzzy search\n   */\n\n  /**\n   * @callback MiniSearch~filter\n   * @param {Object} result - A search result\n   * @return boolean - `true` to keep the result, `false` to filter it out\n   */\n\n  /**\n  * Search for documents matching the given search query.\n  *\n  * The result is a list of scored document IDs matching the query, sorted by\n  * descending score, and each including data about which terms were matched and\n  * in which fields.\n  *\n  * @param {string} queryString - Query string to search for\n  * @param {Object} [options] - Search options. Each option, if not given, defaults to the corresponding value of `searchOptions` given to the constructor, or to the library default.\n  * @param {Array<string>} [options.fields] - Fields to search in. If omitted, all fields are searched\n  * @param {Object<string, number>} [options.boost] - Key-value object of boosting values for fields\n  * @param {boolean|MiniSearch~prefixFn} [options.prefix=false] - Whether to perform prefix search. Value can be a boolean, or a function computing the boolean from each tokenized and processed query term. If a function is given, it is called with the following arguments: `term: string` - the query term; `i: number` - the term index in the query terms; `terms: Array<string>` - the array of query terms.\n  * @param {number|false|MiniSearch~fuzzyFn} [options.fuzzy=false] - If set to a number greater than or equal 1, it performs fuzzy search within a maximum edit distance equal to that value. If set to a number less than 1, it performs fuzzy search with a maximum edit distance equal to the term length times the value, rouded at the nearest integer. If set to a function, it calls the function for each tokenized and processed query term and expects a numeric value indicating the maximum edit distance, or a falsy falue if fuzzy search should not be performed. If a function is given, it is called with the following arguments: `term: string` - the query term; `i: number` - the term index in the query terms; `terms: Array<string>` - the array of query terms.\n  * @param {string} [options.combineWith='OR'] - How to combine term queries (it can be 'OR' or 'AND')\n  * @param {MiniSearch~tokenize} [options.tokenize] - Function used to tokenize the search query. It defaults to the same tokenizer used for indexing.\n  * @param {MiniSearch~processTerm} [options.processTerm] - Function used to process each search term. Return a falsy value to discard a term. Defaults to the same function used to process terms upon indexing.\n  * @param {MiniSearch~filter} [options.filter] - Function used to filter search results, for example on the basis of stored fields\n  * @return {Array<{ id: any, score: number, match: Object }>} A sorted array of scored document IDs matching the search\n  *\n  * @example\n  * // Search for \"zen art motorcycle\" with default options: terms have to match\n  * // exactly, and individual terms are joined with OR\n  * miniSearch.search('zen art motorcycle')\n  * // => [ { id: 2, score: 2.77258, match: { ... } }, { id: 4, score: 1.38629, match: { ... } } ]\n  *\n  * @example\n  * // Search only in the 'title' field\n  * miniSearch.search('zen', { fields: ['title'] })\n  *\n  * @example\n  * // Boost a field\n  * miniSearch.search('zen', { boost: { title: 2 } })\n  *\n  * @example\n  * // Search for \"moto\" with prefix search (it will match documents\n  * // containing terms that start with \"moto\" or \"neuro\")\n  * miniSearch.search('moto neuro', { prefix: true })\n  *\n  * @example\n  * // Search for \"ismael\" with fuzzy search (it will match documents containing\n  * // terms similar to \"ismael\", with a maximum edit distance of 0.2 term.length\n  * // (rounded to nearest integer)\n  * miniSearch.search('ismael', { fuzzy: 0.2 })\n  *\n  * @example\n  * // Mix of exact match, prefix search, and fuzzy search\n  * miniSearch.search('ismael mob', {\n  *  prefix: true,\n  *  fuzzy: 0.2\n  * })\n  *\n  * @example\n  * // Perform fuzzy and prefix search depending on the search term. Here\n  * // performing prefix and fuzzy search only on terms longer than 3 characters\n  * miniSearch.search('ismael mob', {\n  *  prefix: term => term.length > 3\n  *  fuzzy: term => term.length > 3 ? 0.2 : null\n  * })\n  *\n  * @example\n  * // Combine search terms with AND (to match only documents that contain both\n  * // \"motorcycle\" and \"art\")\n  * miniSearch.search('motorcycle art', { combineWith: 'AND' })\n  *\n  * @example\n  * // Filter only results in the 'fiction' category (assuming that 'category'\n  * // is a stored field)\n  * miniSearch.search('motorcycle art', {\n  *   filter: (result) => result.category === 'fiction'\n  * })\n  */\n  ;\n\n  _proto.search = function search(queryString, options) {\n    var _this6 = this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _this$_options3 = this._options,\n        tokenize = _this$_options3.tokenize,\n        processTerm = _this$_options3.processTerm,\n        searchOptions = _this$_options3.searchOptions;\n    options = _objectSpread2(_objectSpread2({\n      tokenize: tokenize,\n      processTerm: processTerm\n    }, searchOptions), options);\n    var _options2 = options,\n        searchTokenize = _options2.tokenize,\n        searchProcessTerm = _options2.processTerm;\n    var queries = searchTokenize(queryString).map(function (term) {\n      return searchProcessTerm(term);\n    }).filter(isTruthy).map(termToQuery(options));\n    var results = queries.map(function (query) {\n      return _this6.executeQuery(query, options);\n    });\n    var combinedResults = this.combineResults(results, options.combineWith);\n    return Object.entries(combinedResults).reduce(function (results, _ref4) {\n      var docId = _ref4[0],\n          _ref4$ = _ref4[1],\n          score = _ref4$.score,\n          match = _ref4$.match,\n          terms = _ref4$.terms;\n      var result = {\n        id: _this6._documentIds[docId],\n        terms: uniq(terms),\n        score: score,\n        match: match\n      };\n      Object.assign(result, _this6._storedFields[docId]);\n\n      if (options.filter == null || options.filter(result)) {\n        results.push(result);\n      }\n\n      return results;\n    }, []).sort(function (_ref5, _ref6) {\n      var a = _ref5.score;\n      var b = _ref6.score;\n      return a < b ? 1 : -1;\n    });\n  }\n  /**\n  * Provide suggestions for the given search query\n  *\n  * The result is a list of suggested modified search queries, derived from the\n  * given search query, each with a relevance score, sorted by descending score.\n  *\n  * @param {string} queryString - Query string to be expanded into suggestions\n  * @param {Object} [options] - Search options. The supported options and default values are the same as for the `search` method, except that by default prefix search is performed on the last term in the query.\n  * @return {Array<{ suggestion: string, score: number }>} A sorted array of suggestions sorted by relevance score.\n  *\n  * @example\n  * // Get suggestions for 'neuro':\n  * miniSearch.autoSuggest('neuro')\n  * // => [ { suggestion: 'neuromancer', terms: [ 'neuromancer' ], score: 0.46240 } ]\n  *\n  * @example\n  * // Get suggestions for 'zen ar':\n  * miniSearch.autoSuggest('zen ar')\n  * // => [\n  * //  { suggestion: 'zen archery art', terms: [ 'zen', 'archery', 'art' ], score: 1.73332 },\n  * //  { suggestion: 'zen art', terms: [ 'zen', 'art' ], score: 1.21313 }\n  * // ]\n  *\n  * @example\n  * // Correct spelling mistakes using fuzzy search:\n  * miniSearch.autoSuggest('neromancer', { fuzzy: 0.2 })\n  * // => [ { suggestion: 'neuromancer', terms: [ 'neuromancer' ], score: 1.03998 } ]\n  *\n  * @example\n  * // Get suggestions for 'zen ar', but only within the 'fiction' category\n  * // (assuming that 'category' is a stored field):\n  * miniSearch.autoSuggest('zen ar', {\n  *   filter: (result) => result.category === 'fiction'\n  * })\n  * // => [\n  * //  { suggestion: 'zen archery art', terms: [ 'zen', 'archery', 'art' ], score: 1.73332 },\n  * //  { suggestion: 'zen art', terms: [ 'zen', 'art' ], score: 1.21313 }\n  * // ]\n  */\n  ;\n\n  _proto.autoSuggest = function autoSuggest(queryString, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    options = _objectSpread2(_objectSpread2({}, defaultAutoSuggestOptions), options);\n    var suggestions = this.search(queryString, options).reduce(function (suggestions, _ref7) {\n      var score = _ref7.score,\n          terms = _ref7.terms;\n      var phrase = terms.join(' ');\n\n      if (suggestions[phrase] == null) {\n        suggestions[phrase] = {\n          score: score,\n          terms: terms,\n          count: 1\n        };\n      } else {\n        suggestions[phrase].score += score;\n        suggestions[phrase].count += 1;\n      }\n\n      return suggestions;\n    }, {});\n    return Object.entries(suggestions).map(function (_ref8) {\n      var suggestion = _ref8[0],\n          _ref8$ = _ref8[1],\n          score = _ref8$.score,\n          terms = _ref8$.terms,\n          count = _ref8$.count;\n      return {\n        suggestion: suggestion,\n        terms: terms,\n        score: score / count\n      };\n    }).sort(function (_ref9, _ref10) {\n      var a = _ref9.score;\n      var b = _ref10.score;\n      return a < b ? 1 : -1;\n    });\n  }\n  /**\n  * Number of documents in the index\n  *\n  * @type {number}\n  */\n  ;\n\n  /**\n  * Deserializes a JSON index (serialized with `miniSearch.toJSON()`) and\n  * instantiates a MiniSearch instance. It should be given the same options\n  * originally used when serializing the index.\n  *\n  * @example\n  * // If the index was serialized with:\n  * let miniSearch = new MiniSearch({ fields: ['title', 'text'] })\n  * miniSearch.addAll(documents)\n  *\n  * const json = JSON.stringify(miniSearch)\n  * // It can later be deserialized like this:\n  * miniSearch = MiniSearch.loadJSON(json, { fields: ['title', 'text'] })\n  *\n  * @param {string} json - JSON-serialized index\n  * @param {Object} options - configuration options, same as the constructor\n  * @return {MiniSearch} an instance of MiniSearch\n  */\n  MiniSearch.loadJSON = function loadJSON(json, options) {\n    if (options == null) {\n      throw new Error('MiniSearch: loadJSON should be given the same options used when serializing the index');\n    }\n\n    return MiniSearch.loadJS(JSON.parse(json), options);\n  }\n  /**\n  * Get the default value of an option. It will throw an error if no option with\n  * the given name exists.\n  *\n  * @param {string} optionName - name of the option\n  * @return {any} the default value of the given option\n  *\n  * @example\n  * // Get default tokenizer\n  * MiniSearch.getDefault('tokenize')\n  *\n  * @example\n  * // Get default term processor\n  * MiniSearch.getDefault('processTerm')\n  *\n  * @example\n  * // Unknown options will throw an error\n  * MiniSearch.getDefault('notExisting')\n  * // => throws 'MiniSearch: unknown option \"notExisting\"'\n  */\n  ;\n\n  MiniSearch.getDefault = function getDefault(optionName) {\n    if (defaultOptions.hasOwnProperty(optionName)) {\n      return defaultOptions[optionName];\n    } else {\n      throw new Error(\"MiniSearch: unknown option \\\"\" + optionName + \"\\\"\");\n    }\n  }\n  /**\n  * @private\n  */\n  ;\n\n  MiniSearch.loadJS = function loadJS(js, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var index = js.index,\n        documentCount = js.documentCount,\n        nextId = js.nextId,\n        documentIds = js.documentIds,\n        fieldIds = js.fieldIds,\n        fieldLength = js.fieldLength,\n        averageFieldLength = js.averageFieldLength,\n        storedFields = js.storedFields;\n    var miniSearch = new MiniSearch(options);\n    miniSearch._index = new SearchableMap(index._tree, index._prefix);\n    miniSearch._documentCount = documentCount;\n    miniSearch._nextId = nextId;\n    miniSearch._documentIds = documentIds;\n    miniSearch._fieldIds = fieldIds;\n    miniSearch._fieldLength = fieldLength;\n    miniSearch._averageFieldLength = averageFieldLength;\n    miniSearch._fieldIds = fieldIds;\n    miniSearch._storedFields = storedFields || {};\n    return miniSearch;\n  }\n  /**\n  * @private\n  * @ignore\n  */\n  ;\n\n  _proto.executeQuery = function executeQuery(query, options) {\n    var _this7 = this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    options = _objectSpread2(_objectSpread2({}, this._options.searchOptions), options);\n\n    var boosts = (options.fields || this._options.fields).reduce(function (boosts, field) {\n      var _objectSpread2$1;\n\n      return _objectSpread2(_objectSpread2({}, boosts), {}, (_objectSpread2$1 = {}, _objectSpread2$1[field] = getOwnProperty(boosts, field) || 1, _objectSpread2$1));\n    }, options.boost || {});\n\n    var _options3 = options,\n        boostDocument = _options3.boostDocument,\n        _options3$weights = _options3.weights,\n        _options3$weights$fuz = _options3$weights.fuzzy,\n        fuzzyWeight = _options3$weights$fuz === void 0 ? 0.9 : _options3$weights$fuz,\n        _options3$weights$pre = _options3$weights.prefix,\n        prefixWeight = _options3$weights$pre === void 0 ? 0.75 : _options3$weights$pre;\n    var exactMatch = termResults(this, query.term, boosts, boostDocument, this._index.get(query.term));\n\n    if (!query.fuzzy && !query.prefix) {\n      return exactMatch;\n    }\n\n    var results = [exactMatch];\n\n    if (query.prefix) {\n      this._index.atPrefix(query.term).forEach(function (term, data) {\n        var weightedDistance = 0.3 * (term.length - query.term.length) / term.length;\n        results.push(termResults(_this7, term, boosts, boostDocument, data, prefixWeight, weightedDistance));\n      });\n    }\n\n    if (query.fuzzy) {\n      var maxDistance = query.fuzzy < 1 ? Math.round(query.term.length * query.fuzzy) : query.fuzzy;\n      Object.entries(this._index.fuzzyGet(query.term, maxDistance)).forEach(function (_ref11) {\n        var term = _ref11[0],\n            _ref11$ = _ref11[1],\n            data = _ref11$[0],\n            distance = _ref11$[1];\n        var weightedDistance = distance / term.length;\n        results.push(termResults(_this7, term, boosts, boostDocument, data, fuzzyWeight, weightedDistance));\n      });\n    }\n\n    return results.reduce(combinators[OR], {});\n  }\n  /**\n  * @private\n  * @ignore\n  */\n  ;\n\n  _proto.combineResults = function combineResults(results, combineWith) {\n    if (combineWith === void 0) {\n      combineWith = OR;\n    }\n\n    if (results.length === 0) {\n      return {};\n    }\n\n    var operator = combineWith.toLowerCase();\n    return results.reduce(combinators[operator], null);\n  }\n  /**\n  * Allows serialization of the index to JSON, to possibly store it and later\n  * deserialize it with `MiniSearch.loadJSON`.\n  *\n  * Normally one does not directly call this method, but rather call the\n  * standard JavaScript `JSON.stringify()` passing the `MiniSearch` instance,\n  * and JavaScript will internally call this method. Upon deserialization, one\n  * must pass to `loadJSON` the same options used to create the original\n  * instance that was serialized.\n  *\n  * @example\n  * // Serialize the index:\n  * let miniSearch = new MiniSearch({ fields: ['title', 'text'] })\n  * miniSearch.addAll(documents)\n  * const json = JSON.stringify(miniSearch)\n  *\n  * // Later, to deserialize it:\n  * miniSearch = MiniSearch.loadJSON(json, { fields: ['title', 'text'] })\n  *\n  * @return {Object} the serializeable representation of the search index\n  */\n  ;\n\n  _proto.toJSON = function toJSON() {\n    return {\n      index: this._index,\n      documentCount: this._documentCount,\n      nextId: this._nextId,\n      documentIds: this._documentIds,\n      fieldIds: this._fieldIds,\n      fieldLength: this._fieldLength,\n      averageFieldLength: this._averageFieldLength,\n      storedFields: this._storedFields\n    };\n  };\n\n  _createClass(MiniSearch, [{\n    key: \"documentCount\",\n    get: function get() {\n      return this._documentCount;\n    }\n  }]);\n\n  return MiniSearch;\n}();\n\nMiniSearch.SearchableMap = SearchableMap;\n\nvar addTerm = function addTerm(self, fieldId, documentId, term) {\n  self._index.update(term, function (indexData) {\n    var _objectSpread3;\n\n    indexData = indexData || {};\n    var fieldIndex = indexData[fieldId] || {\n      df: 0,\n      ds: {}\n    };\n\n    if (fieldIndex.ds[documentId] == null) {\n      fieldIndex.df += 1;\n    }\n\n    fieldIndex.ds[documentId] = (fieldIndex.ds[documentId] || 0) + 1;\n    return _objectSpread2(_objectSpread2({}, indexData), {}, (_objectSpread3 = {}, _objectSpread3[fieldId] = fieldIndex, _objectSpread3));\n  });\n};\n\nvar removeTerm = function removeTerm(self, fieldId, documentId, term) {\n  if (!self._index.has(term)) {\n    warnDocumentChanged(self, documentId, fieldId, term);\n    return;\n  }\n\n  self._index.update(term, function (indexData) {\n    var _objectSpread4;\n\n    var fieldIndex = indexData[fieldId];\n\n    if (fieldIndex == null || fieldIndex.ds[documentId] == null) {\n      warnDocumentChanged(self, documentId, fieldId, term);\n      return indexData;\n    }\n\n    if (fieldIndex.ds[documentId] <= 1) {\n      if (fieldIndex.df <= 1) {\n        delete indexData[fieldId];\n        return indexData;\n      }\n\n      fieldIndex.df -= 1;\n    }\n\n    if (fieldIndex.ds[documentId] <= 1) {\n      delete fieldIndex.ds[documentId];\n      return indexData;\n    }\n\n    fieldIndex.ds[documentId] -= 1;\n    return _objectSpread2(_objectSpread2({}, indexData), {}, (_objectSpread4 = {}, _objectSpread4[fieldId] = fieldIndex, _objectSpread4));\n  });\n\n  if (Object.keys(self._index.get(term)).length === 0) {\n    self._index.delete(term);\n  }\n};\n\nvar warnDocumentChanged = function warnDocumentChanged(self, shortDocumentId, fieldId, term) {\n  if (console == null || console.warn == null) {\n    return;\n  }\n\n  var fieldName = Object.entries(self._fieldIds).find(function (_ref12) {\n    var name = _ref12[0],\n        id = _ref12[1];\n    return id === fieldId;\n  })[0];\n  console.warn(\"MiniSearch: document with ID \" + self._documentIds[shortDocumentId] + \" has changed before removal: term \\\"\" + term + \"\\\" was not present in field \\\"\" + fieldName + \"\\\". Removing a document after it has changed can corrupt the index!\");\n};\n\nvar addDocumentId = function addDocumentId(self, documentId) {\n  var shortDocumentId = self._nextId.toString(36);\n\n  self._documentIds[shortDocumentId] = documentId;\n  self._documentCount += 1;\n  self._nextId += 1;\n  return shortDocumentId;\n};\n\nvar addFields = function addFields(self, fields) {\n  fields.forEach(function (field, i) {\n    self._fieldIds[field] = i;\n  });\n};\n\nvar termResults = function termResults(self, term, boosts, boostDocument, indexData, weight, editDistance) {\n\n  if (editDistance === void 0) {\n    editDistance = 0;\n  }\n\n  if (indexData == null) {\n    return {};\n  }\n\n  return Object.entries(boosts).reduce(function (results, _ref13) {\n    var field = _ref13[0],\n        boost = _ref13[1];\n    var fieldId = self._fieldIds[field];\n\n    var _ref14 = indexData[fieldId] || {\n      ds: {}\n    },\n        df = _ref14.df,\n        ds = _ref14.ds;\n\n    Object.entries(ds).forEach(function (_ref15) {\n      var documentId = _ref15[0],\n          tf = _ref15[1];\n      var docBoost = boostDocument ? boostDocument(self._documentIds[documentId], term) : 1;\n\n      if (!docBoost) {\n        return;\n      }\n\n      var normalizedLength = self._fieldLength[documentId][fieldId] / self._averageFieldLength[fieldId];\n      results[documentId] = results[documentId] || {\n        score: 0,\n        match: {},\n        terms: []\n      };\n      results[documentId].terms.push(term);\n      results[documentId].match[term] = getOwnProperty(results[documentId].match, term) || [];\n      results[documentId].score += docBoost * score(tf, df, self._documentCount, normalizedLength, boost, editDistance);\n      results[documentId].match[term].push(field);\n    });\n    return results;\n  }, {});\n};\n\nvar getOwnProperty = function getOwnProperty(object, property) {\n  return Object.prototype.hasOwnProperty.call(object, property) ? object[property] : undefined;\n};\n\nvar addFieldLength = function addFieldLength(self, documentId, fieldId, count, length) {\n  self._averageFieldLength[fieldId] = self._averageFieldLength[fieldId] || 0;\n  var totalLength = self._averageFieldLength[fieldId] * count + length;\n  self._fieldLength[documentId] = self._fieldLength[documentId] || {};\n  self._fieldLength[documentId][fieldId] = length;\n  self._averageFieldLength[fieldId] = totalLength / (count + 1);\n};\n\nvar saveStoredFields = function saveStoredFields(self, documentId, doc) {\n  var _self$_options = self._options,\n      storeFields = _self$_options.storeFields,\n      extractField = _self$_options.extractField;\n\n  if (storeFields == null || storeFields.length === 0) {\n    return;\n  }\n\n  self._storedFields[documentId] = self._storedFields[documentId] || {};\n  storeFields.forEach(function (fieldName) {\n    var fieldValue = extractField(doc, fieldName);\n\n    if (fieldValue === undefined) {\n      return;\n    }\n\n    self._storedFields[documentId][fieldName] = fieldValue;\n  });\n};\n\nvar combinators = (_combinators = {}, _combinators[OR] = function (a, b) {\n  return Object.entries(b).reduce(function (combined, _ref16) {\n    var documentId = _ref16[0],\n        _ref16$ = _ref16[1],\n        score = _ref16$.score,\n        match = _ref16$.match,\n        terms = _ref16$.terms;\n\n    if (combined[documentId] == null) {\n      combined[documentId] = {\n        score: score,\n        match: match,\n        terms: terms\n      };\n    } else {\n      combined[documentId].score += score;\n      combined[documentId].score *= 1.5;\n      combined[documentId].terms = [].concat(combined[documentId].terms, terms);\n      Object.assign(combined[documentId].match, match);\n    }\n\n    return combined;\n  }, a || {});\n}, _combinators[AND] = function (a, b) {\n  if (a == null) {\n    return b;\n  }\n\n  return Object.entries(b).reduce(function (combined, _ref17) {\n    var documentId = _ref17[0],\n        _ref17$ = _ref17[1],\n        score = _ref17$.score,\n        match = _ref17$.match,\n        terms = _ref17$.terms;\n\n    if (a[documentId] === undefined) {\n      return combined;\n    }\n\n    combined[documentId] = combined[documentId] || {};\n    combined[documentId].score = a[documentId].score + score;\n    combined[documentId].match = _objectSpread2(_objectSpread2({}, a[documentId].match), match);\n    combined[documentId].terms = [].concat(a[documentId].terms, terms);\n    return combined;\n  }, {});\n}, _combinators);\n\nvar tfIdf = function tfIdf(tf, df, n) {\n  return tf * Math.log(n / df);\n};\n\nvar score = function score(termFrequency, documentFrequency, documentCount, normalizedLength, boost, editDistance) {\n  var weight = boost / (1 + 0.333 * boost * editDistance);\n  return weight * tfIdf(termFrequency, documentFrequency, documentCount) / normalizedLength;\n};\n\nvar termToQuery = function termToQuery(options) {\n  return function (term, i, terms) {\n    var fuzzy = typeof options.fuzzy === 'function' ? options.fuzzy(term, i, terms) : options.fuzzy;\n    var prefix = typeof options.prefix === 'function' ? options.prefix(term, i, terms) : options.prefix;\n    return {\n      term: term,\n      fuzzy: fuzzy,\n      prefix: prefix\n    };\n  };\n};\n\nvar uniq = function uniq(array) {\n  return array.filter(function (element, i, array) {\n    return array.indexOf(element) === i;\n  });\n};\n\nvar isTruthy = function isTruthy(x) {\n  return !!x;\n};\n\nvar defaultOptions = {\n  idField: 'id',\n  extractField: function extractField(document, fieldName) {\n    return document[fieldName];\n  },\n  tokenize: function tokenize(string, _fieldName) {\n    return string.split(SPACE_OR_PUNCTUATION);\n  },\n  processTerm: function processTerm(term, _fieldName) {\n    return term.toLowerCase();\n  },\n  fields: undefined,\n  searchOptions: undefined,\n  storeFields: []\n};\nvar defaultSearchOptions = {\n  combineWith: OR,\n  prefix: false,\n  fuzzy: false,\n  weights: {}\n};\nvar defaultAutoSuggestOptions = {\n  prefix: function prefix(term, i, terms) {\n    return i === terms.length - 1;\n  }\n}; // This regular expression matches any Unicode space or punctuation character\n// Adapted from https://unicode.org/cldr/utility/list-unicodeset.jsp?a=%5Cp%7BZ%7D%5Cp%7BP%7D&abb=on&c=on&esc=on\n\nvar SPACE_OR_PUNCTUATION = /[\\n\\r -#%-\\*,-\\/:;\\?@\\[-\\]_\\{\\}\\xA0\\xA1\\xA7\\xAB\\xB6\\xB7\\xBB\\xBF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u09FD\\u0A76\\u0AF0\\u0C77\\u0C84\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166E\\u1680\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2000-\\u200A\\u2010-\\u2029\\u202F-\\u2043\\u2045-\\u2051\\u2053-\\u205F\\u207D\\u207E\\u208D\\u208E\\u2308-\\u230B\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E4F\\u3000-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA8FC\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]+/;\n\nexport default MiniSearch;\n//# sourceMappingURL=index.js.map\n"],"sourceRoot":""}