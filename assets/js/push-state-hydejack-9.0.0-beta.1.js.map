{"version":3,"sources":["webpack:///./_js/src/cross-fader.js","webpack:///./_js/src/flip/index.js","webpack:///./_js/src/flip/title.js","webpack:///./_js/src/push-state.js"],"names":["pseudoHash","background","color","image","overlay","isExternal","protocol","host","location","window","objectURLs","WeakMap","CrossFader","constructor","fadeDuration","main","document","getElementById","styleSheet","Array","from","styleSheets","find","s","ownerNode","id","sidebar","rules","cssRules","prevHash","elemDataset","themeColorEl","querySelector","fetchImage2","of","url","URL","origin","fetchRx","href","method","headers","Accept","mode","pipe","switchMap","r","blob","map","createObjectURL","catchError","fetchImage","dataset","hash","empty","objectURL","div","createElement","classList","add","style","backgroundColor","backgroundImage","set","updateStyle","themeColor","setTimeout","content","c","Color","active","darken","underlineColor","fade","textDecorationColor","borderColor","outlineColor","boxShadow","length","e","process","console","error","prevDiv","parentNode","insertBefore","nextElementSibling","animate","opacity","duration","easing","finalize","has","revokeObjectURL","get","removeChild","FLIP_TYPES","setupFLIP","start$","ready$","fadeIn$","options","other$","filter","flipType","includes","merge","setupFLIPTitle","TITLE_SELECTOR","animationMain","settings","flip$","anchor","title","textContent","transformOrigin","page","call","appendChild","position","first","getBoundingClientRect","last","firstFontSize","parseInt","getComputedStyle","fontSize","lastFontSize","invertX","left","invertY","top","invertScale","transform","tap","complete","zip","replaceEls","x","subscribe","Promise","all","Element","prototype","webComponentsReady","NAVBAR_SEL","CANONICAL_SEL","META_DESC_SEL","FN_SEL","FN_LINK_SEL","HORIZONTAL_SCROLL_SEL","CODE_BLOCK_SEL","CODE_TITLE_REX","MQ_STANDALONE","DURATION","FADE_DURATION","FADE_OUT","FADE_IN","SETTINGS","HEADING_SELECTOR","upgradeHeading","h","df","importTemplate","a","requestAnimationFrame","setupAnimationMain","pushStateEl","previousElementSibling","setupLoading","navbarEl","lastElementChild","setupErrorPage","pathname","importBackButton","button","buttonEl","children","addEventListener","history","back","getFlipType","el","contains","getAttribute","animateFadeOut","fill","mapTo","animateFadeIn","drawerEl","canonicalEl","metaDescEl","loading","backBtnEl","standaloneMQ","matchMedia","standalone","navigator","matches","standalone$","fromMediaQuery","startWith","prepend","fromEventX","eventName","mapFn","fromEvent","detail","_","share","Object","assign","after$","progress$","error$","fadeOut$","context","pointerEvents","_noDrawer","remove","exhaustMap","display","querySelectorAll","forEach","toc","test","innerText","fileName","exec","code","childNodes","splitText","container","firstChild","HTMLImageElement","once","documentFragment","cEl","mEl","li","tabIndex","currentTarget","substr","focus","scrollLeft","stopPropagation","passive","promise","timer","toPromise","transitionUntil","sidebarBg","crossFader","takeUntil","pairwise","mergeMap","prev","curr","_pushState"],"mappings":"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","file":"push-state-hydejack-9.0.0-beta.1.js","sourcesContent":["// Copyright (c) 2019 Florian Klampfer <https://qwtel.com/>\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { default as Color } from 'color';\nimport { default as elemDataset } from 'elem-dataset';\n\nimport { empty, of } from 'rxjs';\nimport { catchError, finalize, map, switchMap } from 'rxjs/operators';\n\nimport { animate, fetchRx } from './common';\n\n// Given a dataset, generate some string we can use the check if anything has changed...\nconst pseudoHash = ({ background, color, image, overlay }) =>\n  `${color}${image || background}${overlay === '' ? 'overlay' : ''}`;\n\n// Consider a URL external if either the protocol, hostname or port is different.\nfunction isExternal({ protocol, host }, location = window.location) {\n  return protocol !== location.protocol || host !== location.host;\n}\n\nconst objectURLs = new WeakMap();\n\nexport class CrossFader {\n  constructor(fadeDuration) {\n    const main = document.getElementById('_main');\n    const styleSheet =\n      Array.from(document.styleSheets).find((s) => s.ownerNode && s.ownerNode.id === '_pageStyle') || {};\n\n    this.sidebar = document.getElementById('_sidebar');\n    this.fadeDuration = fadeDuration;\n    this.rules = styleSheet.cssRules || styleSheet.rules;\n    this.prevHash = pseudoHash(elemDataset(main));\n\n    this.themeColorEl = document.querySelector('meta[name=\"theme-color\"]');\n  }\n\n  fetchImage2({ background, image }) {\n    if (background || !image || image === '' || image === 'none') {\n      return of(null);\n    }\n\n    const url = new URL(image, window.location.origin);\n\n    return fetchRx(url.href, {\n      method: 'GET',\n      headers: { Accept: 'image/*' },\n      ...(isExternal(url) ? { mode: 'cors' } : {}),\n    }).pipe(\n      switchMap((r) => r.blob()),\n      map((blob) => URL.createObjectURL(blob)),\n      catchError(() => of(image)),\n    );\n  }\n\n  fetchImage(main) {\n    const dataset = elemDataset(main);\n    const { background, color, image, overlay } = dataset;\n\n    // HACK: Using `dataset` here to store some intermediate data\n    const hash = pseudoHash(dataset);\n    if (hash === this.prevHash) return empty();\n\n    return this.fetchImage2(dataset).pipe(\n      map((objectURL) => {\n        const div = document.createElement('div');\n        div.classList.add('sidebar-bg');\n\n        // Set overlay\n        if (image !== 'none' && overlay === '') {\n          div.classList.add('sidebar-overlay');\n        }\n\n        // Set background\n        if (background) {\n          div.style.background = background;\n        } else {\n          div.style.backgroundColor = color;\n          if (objectURL) {\n            div.style.backgroundImage = `url(${objectURL})`;\n            objectURLs.set(div, objectURL); // HACK: Store objectURL on DOM node for later revocation\n          }\n        }\n\n        return [div, dataset, hash];\n      }),\n    );\n  }\n\n  updateStyle({ color = '#4fb1ba', themeColor = '#193747' } = {}) {\n    if (this.themeColorEl) {\n      window.setTimeout(() => (this.themeColorEl.content = themeColor), 250);\n    }\n\n    if (this.rules) {\n      try {\n        const c = Color(color);\n        const active = c.darken(0.1);\n        const underlineColor = c.fade(0.5);\n\n        // .content a\n        this.rules[0].style.textDecorationColor = underlineColor;\n        this.rules[0].style.borderColor = underlineColor;\n\n        // .content a:hover\n        this.rules[1].style.textDecorationColor = color;\n        this.rules[1].style.borderColor = color;\n\n        // :focus\n        this.rules[2].style.outlineColor = color;\n\n        // .btn-primary\n        this.rules[3].style.backgroundColor = color;\n        this.rules[3].style.borderColor = color;\n\n        // .btn-primary:focus\n        this.rules[4].style.boxShadow = `0 0 0 3px ${c.fade(0.5)}`;\n\n        // .btn-primary:hover\n        this.rules[5].style.backgroundColor = active;\n        this.rules[5].style.borderColor = active;\n\n        // .btn-primary:disabled\n        this.rules[6].style.backgroundColor = color;\n        this.rules[6].style.borderColor = color;\n\n        // .btn-primary:active\n        this.rules[7].style.backgroundColor = active;\n        this.rules[7].style.borderColor = active;\n\n        // ::selection or ::-moz-selection (assuming it is last in the list)\n        this.rules[this.rules.length - 1].style.backgroundColor = color;\n      } catch (e) {\n        if (process.env.DEBUG) console.error(e);\n      }\n    }\n  }\n\n  fade([prevDiv], [div, dataset, hash]) {\n    prevDiv.parentNode.insertBefore(div, prevDiv.nextElementSibling);\n\n    this.updateStyle(dataset);\n\n    // Only update the prev hash after we're actually in the fade stage\n    this.prevHash = hash;\n\n    return animate(div, [{ opacity: 0 }, { opacity: 1 }], {\n      duration: this.fadeDuration,\n      easing: 'ease',\n    }).pipe(\n      finalize(() => {\n        if (objectURLs.has(prevDiv)) URL.revokeObjectURL(objectURLs.get(prevDiv));\n        prevDiv.parentNode.removeChild(prevDiv);\n      }),\n    );\n  }\n}\n","// Copyright (c) 2019 Florian Klampfer <https://qwtel.com/>\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { merge } from 'rxjs';\nimport { filter } from 'rxjs/operators';\n\nimport { setupFLIPTitle } from './title';\n\nconst FLIP_TYPES = ['title'];\n\nexport function setupFLIP(start$, ready$, fadeIn$, options) {\n  const other$ = start$.pipe(filter(({ flipType }) => !FLIP_TYPES.includes(flipType)));\n\n  return merge(setupFLIPTitle(start$, ready$, fadeIn$, options), other$);\n}\n","// Copyright (c) 2019 Florian Klampfer <https://qwtel.com/>\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { of, zip } from 'rxjs';\nimport { tap, finalize, filter, map, switchMap } from 'rxjs/operators';\n\nimport { animate, empty } from '../common';\n\nconst TITLE_SELECTOR = '.page-title, .post-title';\n\nexport function setupFLIPTitle(start$, ready$, fadeIn$, { animationMain, settings }) {\n  if (!animationMain) return start$;\n\n  const flip$ = start$.pipe(\n    filter(({ flipType }) => flipType === 'title'),\n    switchMap(({ anchor }) => {\n      if (!anchor) return of({});\n\n      const title = document.createElement('h1');\n\n      title.classList.add('page-title');\n      title.textContent = anchor.textContent;\n      title.style.transformOrigin = 'left top';\n\n      const page = animationMain.querySelector('.page');\n      if (!page) return of({});\n\n      empty.call(page);\n      page.appendChild(title);\n\n      animationMain.style.position = 'fixed';\n      animationMain.style.opacity = 1;\n\n      const first = anchor.getBoundingClientRect();\n      const last = title.getBoundingClientRect();\n      const firstFontSize = parseInt(getComputedStyle(anchor).fontSize, 10);\n      const lastFontSize = parseInt(getComputedStyle(title).fontSize, 10);\n\n      const invertX = first.left - last.left;\n      const invertY = first.top - last.top;\n      const invertScale = firstFontSize / lastFontSize;\n\n      anchor.style.opacity = 0;\n\n      const transform = [\n        {\n          transform: `translate3d(${invertX}px, ${invertY}px, 0) scale(${invertScale})`,\n        },\n        { transform: 'translate3d(0, 0, 0) scale(1)' },\n      ];\n\n      return animate(title, transform, settings).pipe(\n        tap({\n          complete() {\n            animationMain.style.position = 'absolute';\n          },\n        }),\n      );\n    }),\n  );\n\n  start$\n    .pipe(\n      switchMap(({ flipType }) =>\n        zip(\n          ready$.pipe(\n            filter(() => flipType === 'title'),\n            map(({ replaceEls: [main] }) => {\n              const title = main.querySelector(TITLE_SELECTOR);\n              if (title) title.style.opacity = 0;\n              return title;\n            }),\n          ),\n          fadeIn$,\n          (x) => x,\n        ).pipe(\n          tap((title) => {\n            if (title) title.style.opacity = 1;\n            animationMain.style.opacity = 0;\n          }),\n          finalize(() => {\n            animationMain.style.opacity = 0;\n          }),\n        ),\n      ),\n    )\n    .subscribe();\n\n  return flip$;\n}\n","// Copyright (c) 2019 Florian Klampfer <https://qwtel.com/>\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { fromEvent, merge, timer, zip } from 'rxjs';\nimport {\n  tap,\n  exhaustMap,\n  map,\n  mapTo,\n  mergeMap,\n  pairwise,\n  share,\n  startWith,\n  switchMap,\n  takeUntil,\n} from 'rxjs/operators';\n\nimport { animate, empty, importTemplate, webComponentsReady, show, hide, fromMediaQuery } from './common';\nimport { CrossFader } from './cross-fader';\nimport { setupFLIP } from './flip';\n\n(async () => {\n  await Promise.all([\n    ...('fetch' in window ? [] : [import(/* webpackChunkName: \"fetch\" */ './polyfills/fetch')]),\n    ...('customElements' in window\n      ? []\n      : [import(/* webpackChunkName: \"webcomponents\" */ './polyfills/webcomponents')]),\n    ...('animate' in Element.prototype ? [] : [import(/* webpackChunkName: \"webanimations\" */ 'web-animations-js')]),\n    ...('IntersectionObserver' in window\n      ? []\n      : [import(/* webpackChunkName: \"intersection-observer\" */ 'intersection-observer')]),\n  ]);\n\n  await webComponentsReady;\n\n  const NAVBAR_SEL = '#_navbar > .content > .nav-btn-bar';\n  const CANONICAL_SEL = 'link[rel=canonical]';\n  const META_DESC_SEL = 'meta[name=description]';\n  const FN_SEL = \"li[id^='fn:']\";\n  const FN_LINK_SEL = \"a[href^='#fn:']\";\n  const HORIZONTAL_SCROLL_SEL = 'pre, table:not(.highlight), .katex-display, .break-layout';\n  const CODE_BLOCK_SEL = 'pre.highlight > code';\n  const CODE_TITLE_REX = /(?:title|file):\\s*['\"`](.*)['\"`]/i;\n  const MQ_STANDALONE = '(display-mode: standalone)';\n\n  const DURATION = 350;\n\n  const FADE_DURATION = 2000;\n\n  const FADE_OUT = [{ opacity: 1 }, { opacity: 0 }];\n\n  const FADE_IN = [\n    { opacity: 0, transform: 'translateY(-3rem)' },\n    { opacity: 1, transform: 'translateY(0)' },\n  ];\n\n  const SETTINGS = {\n    duration: DURATION,\n    easing: 'ease-out',\n  };\n\n  const HEADING_SELECTOR = 'h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]';\n\n  function upgradeHeading(h) {\n    const df = importTemplate('_permalink-template');\n    const a = df.querySelector('.permalink');\n    requestAnimationFrame(() => ((a.href = `#${h.id}`), h.appendChild(df)));\n  }\n\n  function setupAnimationMain(pushStateEl) {\n    pushStateEl?.parentNode?.insertBefore(importTemplate('_animation-template'), pushStateEl);\n    return pushStateEl?.previousElementSibling;\n  }\n\n  function setupLoading(navbarEl) {\n    navbarEl?.appendChild(importTemplate('_loading-template'));\n    return navbarEl?.lastElementChild;\n  }\n\n  function setupErrorPage(main, url) {\n    const { pathname } = url;\n    const error = importTemplate('_error-template');\n    const anchor = error?.querySelector('.this-link');\n    if (anchor) {\n      anchor.href = pathname;\n      anchor.textContent = pathname;\n    }\n    main?.appendChild(error);\n    return main?.lastElementChild;\n  }\n\n  function importBackButton() {\n    const button = importTemplate('_back-template');\n    const buttonEl = button?.children[0];\n    button?.querySelector('.nav-btn')?.addEventListener('click', () => window.history.back());\n    return buttonEl;\n  }\n\n  function getFlipType(el) {\n    if (el?.classList.contains('flip-title')) return 'title';\n    if (el?.classList.contains('flip-project')) return 'project';\n    return el?.getAttribute?.('data-flip');\n  }\n\n  function animateFadeOut({ main }) {\n    return animate(main, FADE_OUT, { ...SETTINGS, fill: 'forwards' }).pipe(mapTo({ main }));\n  }\n\n  function animateFadeIn({ replaceEls: [main], flipType }) {\n    return animate(main, FADE_IN, SETTINGS).pipe(mapTo({ main, flipType }));\n  }\n\n  const pushStateEl = document.querySelector('hy-push-state');\n  if (!pushStateEl) return;\n\n  const drawerEl = document.querySelector('hy-drawer');\n  const navbarEl = document.querySelector(NAVBAR_SEL);\n  const canonicalEl = document.querySelector(CANONICAL_SEL);\n  const metaDescEl = document.querySelector(META_DESC_SEL);\n\n  const animationMain = setupAnimationMain(pushStateEl);\n  const loading = setupLoading(navbarEl);\n\n  const backBtnEl = importBackButton();\n  if (navbarEl && backBtnEl) {\n    const standaloneMQ = window.matchMedia(MQ_STANDALONE);\n    const standalone = !!navigator.standalone || standaloneMQ.matches;\n    const standalone$ = fromMediaQuery(standaloneMQ).pipe(\n      map((e) => e.matches),\n      startWith(standalone),\n    );\n    standalone$\n      .pipe(\n        tap((matches) => {\n          if (matches) navbarEl.prepend(backBtnEl);\n          else if (backBtnEl.parentNode === navbarEl) navbarEl.removeChild(backBtnEl);\n        }),\n      )\n      .subscribe();\n  }\n\n  const fromEventX = (eventName, mapFn) =>\n    fromEvent(pushStateEl, eventName).pipe(\n      map(({ detail }) => detail),\n      mapFn ? map(mapFn) : (_) => _,\n      share(),\n    );\n\n  const start$ = fromEventX('hy-push-state-start', (detail) =>\n    Object.assign(detail, { flipType: getFlipType(detail.anchor) }),\n  );\n  const ready$ = fromEventX('hy-push-state-ready');\n  const after$ = fromEventX('hy-push-state-after');\n  const progress$ = fromEventX('hy-push-state-progress');\n  const error$ = fromEventX('hy-push-state-networkerror');\n\n  const fadeOut$ = start$.pipe(\n    map((context) => Object.assign(context, { main: document.getElementById('_main') })),\n    tap(({ main }) => {\n      main.style.pointerEvents = 'none';\n    }),\n    window._noDrawer && drawerEl?.classList.contains('cover')\n      ? tap(() => {\n          drawerEl.classList.remove('cover');\n          drawerEl.parentNode?.appendChild(drawerEl);\n        })\n      : (_) => _,\n    exhaustMap(animateFadeOut),\n    tap(({ main }) => empty.call(main)),\n    share(),\n  );\n\n  progress$.subscribe(() => {\n    if (loading) loading.style.display = 'flex';\n  });\n\n  ready$.pipe(startWith({ replaceEls: [document.getElementById('_main')] })).subscribe(({ replaceEls: [main] }) => {\n    main.querySelectorAll(HEADING_SELECTOR).forEach(upgradeHeading);\n    if (loading) loading.style.display = 'none';\n\n    const toc = main.querySelector('#markdown-toc');\n    if (toc) toc.classList.add('toc-hide');\n\n    Array.from(main.querySelectorAll(CODE_BLOCK_SEL))\n      .map((el) => el.children[0])\n      .filter((el) => CODE_TITLE_REX.test(el?.innerText))\n      .forEach((el) => {\n        const [, fileName] = CODE_TITLE_REX.exec(el.innerText);\n\n        // Remove element before making changes\n        const code = el.parentNode;\n        code.removeChild(el);\n\n        // Remove newline\n        code.childNodes[0].splitText(1);\n        code.removeChild(code.childNodes[0]);\n\n        // Update DOM\n        el.innerText = fileName;\n        el.classList.add('pre-header');\n        const container = code.parentNode.parentNode;\n        container.insertBefore(el, container.firstChild);\n      });\n\n    if ('complete' in HTMLImageElement.prototype) {\n      main.querySelectorAll('img[width][height][loading=lazy]').forEach((el) => {\n        if (!el.complete) {\n          el.style.opacity = '0';\n          el.addEventListener(\n            'load',\n            () => {\n              el.style.opacity = '';\n            },\n            { once: true },\n          );\n        }\n      });\n    }\n\n    /*\n      requestIdleCallback(() => {\n        main.querySelectorAll(pushStateEl.linkSelector).forEach(anchor => {\n          caches.match(anchor.href).then(m => {\n            if (m) requestAnimationFrame(() => anchor.classList.add(\"visited\"));\n          });\n        });\n      });\n      */\n  });\n\n  after$\n    .pipe(\n      startWith({\n        replaceEls: [document.getElementById('_main')],\n        documentFragment: document,\n      }),\n    )\n    .subscribe(({ replaceEls: [main], documentFragment }) => {\n      const cEl = documentFragment.querySelector(CANONICAL_SEL);\n      if (canonicalEl && cEl) canonicalEl.href = cEl.href;\n\n      const mEl = documentFragment.querySelector(META_DESC_SEL);\n      if (metaDescEl && mEl) metaDescEl.content = mEl.content;\n\n      main.querySelectorAll(FN_SEL).forEach((li) => (li.tabIndex = 0));\n\n      main\n        .querySelectorAll(FN_LINK_SEL)\n        .forEach((a) =>\n          a.addEventListener('click', (e) =>\n            document.getElementById(e.currentTarget.getAttribute('href').substr(1))?.focus(),\n          ),\n        );\n\n      main\n        .querySelectorAll(HORIZONTAL_SCROLL_SEL)\n        .forEach((el) =>\n          el.addEventListener('touchstart', (e) => el.scrollLeft > 0 && e.stopPropagation(), { passive: false }),\n        );\n    });\n\n  const fadeIn$ = after$.pipe(switchMap(animateFadeIn), share());\n\n  const flip$ = setupFLIP(start$, ready$, merge(fadeIn$, error$), {\n    animationMain,\n    settings: SETTINGS,\n  }).pipe(share());\n\n  start$\n    .pipe(\n      switchMap((context) => {\n        const promise = zip(timer(DURATION), fadeOut$, flip$).toPromise();\n        context.transitionUntil(promise);\n        return promise;\n      }),\n    )\n    .subscribe();\n\n  // FIXME: Keeping permanent subscription? turn into hot observable?\n  fadeOut$.subscribe();\n  flip$.subscribe();\n\n  const sidebarBg = document.querySelector('.sidebar-bg');\n  if (sidebarBg) {\n    const crossFader = new CrossFader(FADE_DURATION);\n    after$\n      .pipe(\n        switchMap(({ replaceEls: [main] }) =>\n          zip(crossFader.fetchImage(main), fadeIn$).pipe(\n            map(([x]) => x),\n            takeUntil(start$),\n          ),\n        ),\n        startWith([sidebarBg]),\n        pairwise(),\n        mergeMap(([prev, curr]) => crossFader.fade(prev, curr)),\n      )\n      .subscribe();\n  }\n\n  fadeIn$\n    .pipe(\n      startWith({ main: document.getElementById('_main') }),\n      tap(({ main }) => {\n        const toc = main?.querySelector('#markdown-toc');\n        if (toc) {\n          toc.classList.remove('toc-hide');\n          toc.classList.add('toc-show');\n        }\n      }),\n    )\n    .subscribe();\n\n  error$\n    .pipe(\n      switchMap(({ url }) => {\n        if (loading) loading.style.display = 'none';\n\n        const main = document.getElementById('_main');\n        if (main) main.style.pointerEvents = '';\n        empty.call(animationMain?.querySelector('.page'));\n        empty.call(main);\n\n        setupErrorPage(main, url);\n\n        return animate(main, FADE_IN, { ...SETTINGS, fill: 'forwards' });\n      }),\n    )\n    .subscribe();\n\n  import(/* webpackMode: \"eager\" */ '@hydecorp/push-state');\n\n  window._pushState = pushStateEl;\n})();\n"],"sourceRoot":""}