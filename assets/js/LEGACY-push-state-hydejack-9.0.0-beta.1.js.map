{"version":3,"sources":["webpack:///./_js/src/cross-fader.js","webpack:///./_js/src/flip/index.js","webpack:///./_js/src/flip/title.js","webpack:///./_js/src/push-state.js"],"names":["pseudoHash","background","color","image","overlay","isExternal","protocol","host","location","window","objectURLs","WeakMap","CrossFader","fadeDuration","main","document","getElementById","styleSheet","Array","from","styleSheets","find","s","ownerNode","id","sidebar","rules","cssRules","prevHash","elemDataset","themeColorEl","querySelector","of","url","URL","origin","fetchRx","href","method","headers","Accept","mode","pipe","switchMap","r","blob","map","createObjectURL","catchError","dataset","hash","empty","fetchImage2","objectURL","div","createElement","classList","add","style","backgroundColor","backgroundImage","set","themeColor","setTimeout","content","c","Color","active","darken","underlineColor","fade","textDecorationColor","borderColor","outlineColor","boxShadow","length","e","process","console","error","prevDiv","parentNode","insertBefore","nextElementSibling","updateStyle","animate","opacity","duration","easing","finalize","has","revokeObjectURL","get","removeChild","FLIP_TYPES","setupFLIP","start$","ready$","fadeIn$","options","other$","filter","flipType","includes","merge","setupFLIPTitle","TITLE_SELECTOR","animationMain","settings","flip$","anchor","title","textContent","transformOrigin","page","call","appendChild","position","first","getBoundingClientRect","last","firstFontSize","parseInt","getComputedStyle","fontSize","lastFontSize","invertX","left","invertY","top","invertScale","transform","tap","complete","zip","replaceEls","x","subscribe","upgradeHeading","setupAnimationMain","setupLoading","setupErrorPage","importBackButton","getFlipType","animateFadeOut","animateFadeIn","FADE_IN","SETTINGS","mapTo","FADE_OUT","fill","el","contains","getAttribute","button","importTemplate","buttonEl","children","addEventListener","history","back","pathname","lastElementChild","navbarEl","pushStateEl","previousElementSibling","h","df","a","requestAnimationFrame","Promise","all","Element","prototype","webComponentsReady","NAVBAR_SEL","CANONICAL_SEL","META_DESC_SEL","FN_SEL","FN_LINK_SEL","HORIZONTAL_SCROLL_SEL","CODE_BLOCK_SEL","CODE_TITLE_REX","MQ_STANDALONE","DURATION","FADE_DURATION","HEADING_SELECTOR","drawerEl","canonicalEl","metaDescEl","loading","backBtnEl","standaloneMQ","matchMedia","standalone","navigator","matches","standalone$","fromMediaQuery","startWith","prepend","fromEventX","eventName","mapFn","fromEvent","detail","_","share","Object","assign","after$","progress$","error$","fadeOut$","context","pointerEvents","_noDrawer","remove","exhaustMap","display","querySelectorAll","forEach","toc","test","innerText","exec","fileName","code","childNodes","splitText","container","firstChild","HTMLImageElement","once","documentFragment","cEl","mEl","li","tabIndex","currentTarget","substr","focus","scrollLeft","stopPropagation","passive","promise","timer","toPromise","transitionUntil","sidebarBg","crossFader","fetchImage","takeUntil","pairwise","mergeMap","prev","curr","_pushState"],"mappings":"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","file":"LEGACY-push-state-hydejack-9.0.0-beta.1.js","sourcesContent":["// Copyright (c) 2019 Florian Klampfer <https://qwtel.com/>\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { default as Color } from 'color';\nimport { default as elemDataset } from 'elem-dataset';\n\nimport { empty, of } from 'rxjs';\nimport { catchError, finalize, map, switchMap } from 'rxjs/operators';\n\nimport { animate, fetchRx } from './common';\n\n// Given a dataset, generate some string we can use the check if anything has changed...\nconst pseudoHash = ({ background, color, image, overlay }) =>\n  `${color}${image || background}${overlay === '' ? 'overlay' : ''}`;\n\n// Consider a URL external if either the protocol, hostname or port is different.\nfunction isExternal({ protocol, host }, location = window.location) {\n  return protocol !== location.protocol || host !== location.host;\n}\n\nconst objectURLs = new WeakMap();\n\nexport class CrossFader {\n  constructor(fadeDuration) {\n    const main = document.getElementById('_main');\n    const styleSheet =\n      Array.from(document.styleSheets).find((s) => s.ownerNode && s.ownerNode.id === '_pageStyle') || {};\n\n    this.sidebar = document.getElementById('_sidebar');\n    this.fadeDuration = fadeDuration;\n    this.rules = styleSheet.cssRules || styleSheet.rules;\n    this.prevHash = pseudoHash(elemDataset(main));\n\n    this.themeColorEl = document.querySelector('meta[name=\"theme-color\"]');\n  }\n\n  fetchImage2({ background, image }) {\n    if (background || !image || image === '' || image === 'none') {\n      return of(null);\n    }\n\n    const url = new URL(image, window.location.origin);\n\n    return fetchRx(url.href, {\n      method: 'GET',\n      headers: { Accept: 'image/*' },\n      ...(isExternal(url) ? { mode: 'cors' } : {}),\n    }).pipe(\n      switchMap((r) => r.blob()),\n      map((blob) => URL.createObjectURL(blob)),\n      catchError(() => of(image)),\n    );\n  }\n\n  fetchImage(main) {\n    const dataset = elemDataset(main);\n    const { background, color, image, overlay } = dataset;\n\n    // HACK: Using `dataset` here to store some intermediate data\n    const hash = pseudoHash(dataset);\n    if (hash === this.prevHash) return empty();\n\n    return this.fetchImage2(dataset).pipe(\n      map((objectURL) => {\n        const div = document.createElement('div');\n        div.classList.add('sidebar-bg');\n\n        // Set overlay\n        if (image !== 'none' && overlay === '') {\n          div.classList.add('sidebar-overlay');\n        }\n\n        // Set background\n        if (background) {\n          div.style.background = background;\n        } else {\n          div.style.backgroundColor = color;\n          if (objectURL) {\n            div.style.backgroundImage = `url(${objectURL})`;\n            objectURLs.set(div, objectURL); // HACK: Store objectURL on DOM node for later revocation\n          }\n        }\n\n        return [div, dataset, hash];\n      }),\n    );\n  }\n\n  updateStyle({ color = '#4fb1ba', themeColor = '#193747' } = {}) {\n    if (this.themeColorEl) {\n      window.setTimeout(() => (this.themeColorEl.content = themeColor), 250);\n    }\n\n    if (this.rules) {\n      try {\n        const c = Color(color);\n        const active = c.darken(0.1);\n        const underlineColor = c.fade(0.5);\n\n        // .content a\n        this.rules[0].style.textDecorationColor = underlineColor;\n        this.rules[0].style.borderColor = underlineColor;\n\n        // .content a:hover\n        this.rules[1].style.textDecorationColor = color;\n        this.rules[1].style.borderColor = color;\n\n        // :focus\n        this.rules[2].style.outlineColor = color;\n\n        // .btn-primary\n        this.rules[3].style.backgroundColor = color;\n        this.rules[3].style.borderColor = color;\n\n        // .btn-primary:focus\n        this.rules[4].style.boxShadow = `0 0 0 3px ${c.fade(0.5)}`;\n\n        // .btn-primary:hover\n        this.rules[5].style.backgroundColor = active;\n        this.rules[5].style.borderColor = active;\n\n        // .btn-primary:disabled\n        this.rules[6].style.backgroundColor = color;\n        this.rules[6].style.borderColor = color;\n\n        // .btn-primary:active\n        this.rules[7].style.backgroundColor = active;\n        this.rules[7].style.borderColor = active;\n\n        // ::selection or ::-moz-selection (assuming it is last in the list)\n        this.rules[this.rules.length - 1].style.backgroundColor = color;\n      } catch (e) {\n        if (process.env.DEBUG) console.error(e);\n      }\n    }\n  }\n\n  fade([prevDiv], [div, dataset, hash]) {\n    prevDiv.parentNode.insertBefore(div, prevDiv.nextElementSibling);\n\n    this.updateStyle(dataset);\n\n    // Only update the prev hash after we're actually in the fade stage\n    this.prevHash = hash;\n\n    return animate(div, [{ opacity: 0 }, { opacity: 1 }], {\n      duration: this.fadeDuration,\n      easing: 'ease',\n    }).pipe(\n      finalize(() => {\n        if (objectURLs.has(prevDiv)) URL.revokeObjectURL(objectURLs.get(prevDiv));\n        prevDiv.parentNode.removeChild(prevDiv);\n      }),\n    );\n  }\n}\n","// Copyright (c) 2019 Florian Klampfer <https://qwtel.com/>\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { merge } from 'rxjs';\nimport { filter } from 'rxjs/operators';\n\nimport { setupFLIPTitle } from './title';\n\nconst FLIP_TYPES = ['title'];\n\nexport function setupFLIP(start$, ready$, fadeIn$, options) {\n  const other$ = start$.pipe(filter(({ flipType }) => !FLIP_TYPES.includes(flipType)));\n\n  return merge(setupFLIPTitle(start$, ready$, fadeIn$, options), other$);\n}\n","// Copyright (c) 2019 Florian Klampfer <https://qwtel.com/>\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { of, zip } from 'rxjs';\nimport { tap, finalize, filter, map, switchMap } from 'rxjs/operators';\n\nimport { animate, empty } from '../common';\n\nconst TITLE_SELECTOR = '.page-title, .post-title';\n\nexport function setupFLIPTitle(start$, ready$, fadeIn$, { animationMain, settings }) {\n  if (!animationMain) return start$;\n\n  const flip$ = start$.pipe(\n    filter(({ flipType }) => flipType === 'title'),\n    switchMap(({ anchor }) => {\n      if (!anchor) return of({});\n\n      const title = document.createElement('h1');\n\n      title.classList.add('page-title');\n      title.textContent = anchor.textContent;\n      title.style.transformOrigin = 'left top';\n\n      const page = animationMain.querySelector('.page');\n      if (!page) return of({});\n\n      empty.call(page);\n      page.appendChild(title);\n\n      animationMain.style.position = 'fixed';\n      animationMain.style.opacity = 1;\n\n      const first = anchor.getBoundingClientRect();\n      const last = title.getBoundingClientRect();\n      const firstFontSize = parseInt(getComputedStyle(anchor).fontSize, 10);\n      const lastFontSize = parseInt(getComputedStyle(title).fontSize, 10);\n\n      const invertX = first.left - last.left;\n      const invertY = first.top - last.top;\n      const invertScale = firstFontSize / lastFontSize;\n\n      anchor.style.opacity = 0;\n\n      const transform = [\n        {\n          transform: `translate3d(${invertX}px, ${invertY}px, 0) scale(${invertScale})`,\n        },\n        { transform: 'translate3d(0, 0, 0) scale(1)' },\n      ];\n\n      return animate(title, transform, settings).pipe(\n        tap({\n          complete() {\n            animationMain.style.position = 'absolute';\n          },\n        }),\n      );\n    }),\n  );\n\n  start$\n    .pipe(\n      switchMap(({ flipType }) =>\n        zip(\n          ready$.pipe(\n            filter(() => flipType === 'title'),\n            map(({ replaceEls: [main] }) => {\n              const title = main.querySelector(TITLE_SELECTOR);\n              if (title) title.style.opacity = 0;\n              return title;\n            }),\n          ),\n          fadeIn$,\n          (x) => x,\n        ).pipe(\n          tap((title) => {\n            if (title) title.style.opacity = 1;\n            animationMain.style.opacity = 0;\n          }),\n          finalize(() => {\n            animationMain.style.opacity = 0;\n          }),\n        ),\n      ),\n    )\n    .subscribe();\n\n  return flip$;\n}\n","// Copyright (c) 2019 Florian Klampfer <https://qwtel.com/>\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { fromEvent, merge, timer, zip } from 'rxjs';\nimport {\n  tap,\n  exhaustMap,\n  map,\n  mapTo,\n  mergeMap,\n  pairwise,\n  share,\n  startWith,\n  switchMap,\n  takeUntil,\n} from 'rxjs/operators';\n\nimport { animate, empty, importTemplate, webComponentsReady, show, hide, fromMediaQuery } from './common';\nimport { CrossFader } from './cross-fader';\nimport { setupFLIP } from './flip';\n\n(async () => {\n  await Promise.all([\n    ...('fetch' in window ? [] : [import(/* webpackChunkName: \"fetch\" */ './polyfills/fetch')]),\n    ...('customElements' in window\n      ? []\n      : [import(/* webpackChunkName: \"webcomponents\" */ './polyfills/webcomponents')]),\n    ...('animate' in Element.prototype ? [] : [import(/* webpackChunkName: \"webanimations\" */ 'web-animations-js')]),\n    ...('IntersectionObserver' in window\n      ? []\n      : [import(/* webpackChunkName: \"intersection-observer\" */ 'intersection-observer')]),\n  ]);\n\n  await webComponentsReady;\n\n  const NAVBAR_SEL = '#_navbar > .content > .nav-btn-bar';\n  const CANONICAL_SEL = 'link[rel=canonical]';\n  const META_DESC_SEL = 'meta[name=description]';\n  const FN_SEL = \"li[id^='fn:']\";\n  const FN_LINK_SEL = \"a[href^='#fn:']\";\n  const HORIZONTAL_SCROLL_SEL = 'pre, table:not(.highlight), .katex-display, .break-layout';\n  const CODE_BLOCK_SEL = 'pre.highlight > code';\n  const CODE_TITLE_REX = /(?:title|file):\\s*['\"`](.*)['\"`]/i;\n  const MQ_STANDALONE = '(display-mode: standalone)';\n\n  const DURATION = 350;\n\n  const FADE_DURATION = 2000;\n\n  const FADE_OUT = [{ opacity: 1 }, { opacity: 0 }];\n\n  const FADE_IN = [\n    { opacity: 0, transform: 'translateY(-3rem)' },\n    { opacity: 1, transform: 'translateY(0)' },\n  ];\n\n  const SETTINGS = {\n    duration: DURATION,\n    easing: 'ease-out',\n  };\n\n  const HEADING_SELECTOR = 'h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]';\n\n  function upgradeHeading(h) {\n    const df = importTemplate('_permalink-template');\n    const a = df.querySelector('.permalink');\n    requestAnimationFrame(() => ((a.href = `#${h.id}`), h.appendChild(df)));\n  }\n\n  function setupAnimationMain(pushStateEl) {\n    pushStateEl?.parentNode?.insertBefore(importTemplate('_animation-template'), pushStateEl);\n    return pushStateEl?.previousElementSibling;\n  }\n\n  function setupLoading(navbarEl) {\n    navbarEl?.appendChild(importTemplate('_loading-template'));\n    return navbarEl?.lastElementChild;\n  }\n\n  function setupErrorPage(main, url) {\n    const { pathname } = url;\n    const error = importTemplate('_error-template');\n    const anchor = error?.querySelector('.this-link');\n    if (anchor) {\n      anchor.href = pathname;\n      anchor.textContent = pathname;\n    }\n    main?.appendChild(error);\n    return main?.lastElementChild;\n  }\n\n  function importBackButton() {\n    const button = importTemplate('_back-template');\n    const buttonEl = button?.children[0];\n    button?.querySelector('.nav-btn')?.addEventListener('click', () => window.history.back());\n    return buttonEl;\n  }\n\n  function getFlipType(el) {\n    if (el?.classList.contains('flip-title')) return 'title';\n    if (el?.classList.contains('flip-project')) return 'project';\n    return el?.getAttribute?.('data-flip');\n  }\n\n  function animateFadeOut({ main }) {\n    return animate(main, FADE_OUT, { ...SETTINGS, fill: 'forwards' }).pipe(mapTo({ main }));\n  }\n\n  function animateFadeIn({ replaceEls: [main], flipType }) {\n    return animate(main, FADE_IN, SETTINGS).pipe(mapTo({ main, flipType }));\n  }\n\n  const pushStateEl = document.querySelector('hy-push-state');\n  if (!pushStateEl) return;\n\n  const drawerEl = document.querySelector('hy-drawer');\n  const navbarEl = document.querySelector(NAVBAR_SEL);\n  const canonicalEl = document.querySelector(CANONICAL_SEL);\n  const metaDescEl = document.querySelector(META_DESC_SEL);\n\n  const animationMain = setupAnimationMain(pushStateEl);\n  const loading = setupLoading(navbarEl);\n\n  const backBtnEl = importBackButton();\n  if (navbarEl && backBtnEl) {\n    const standaloneMQ = window.matchMedia(MQ_STANDALONE);\n    const standalone = !!navigator.standalone || standaloneMQ.matches;\n    const standalone$ = fromMediaQuery(standaloneMQ).pipe(\n      map((e) => e.matches),\n      startWith(standalone),\n    );\n    standalone$\n      .pipe(\n        tap((matches) => {\n          if (matches) navbarEl.prepend(backBtnEl);\n          else if (backBtnEl.parentNode === navbarEl) navbarEl.removeChild(backBtnEl);\n        }),\n      )\n      .subscribe();\n  }\n\n  const fromEventX = (eventName, mapFn) =>\n    fromEvent(pushStateEl, eventName).pipe(\n      map(({ detail }) => detail),\n      mapFn ? map(mapFn) : (_) => _,\n      share(),\n    );\n\n  const start$ = fromEventX('hy-push-state-start', (detail) =>\n    Object.assign(detail, { flipType: getFlipType(detail.anchor) }),\n  );\n  const ready$ = fromEventX('hy-push-state-ready');\n  const after$ = fromEventX('hy-push-state-after');\n  const progress$ = fromEventX('hy-push-state-progress');\n  const error$ = fromEventX('hy-push-state-networkerror');\n\n  const fadeOut$ = start$.pipe(\n    map((context) => Object.assign(context, { main: document.getElementById('_main') })),\n    tap(({ main }) => {\n      main.style.pointerEvents = 'none';\n    }),\n    window._noDrawer && drawerEl?.classList.contains('cover')\n      ? tap(() => {\n          drawerEl.classList.remove('cover');\n          drawerEl.parentNode?.appendChild(drawerEl);\n        })\n      : (_) => _,\n    exhaustMap(animateFadeOut),\n    tap(({ main }) => empty.call(main)),\n    share(),\n  );\n\n  progress$.subscribe(() => {\n    if (loading) loading.style.display = 'flex';\n  });\n\n  ready$.pipe(startWith({ replaceEls: [document.getElementById('_main')] })).subscribe(({ replaceEls: [main] }) => {\n    main.querySelectorAll(HEADING_SELECTOR).forEach(upgradeHeading);\n    if (loading) loading.style.display = 'none';\n\n    const toc = main.querySelector('#markdown-toc');\n    if (toc) toc.classList.add('toc-hide');\n\n    Array.from(main.querySelectorAll(CODE_BLOCK_SEL))\n      .map((el) => el.children[0])\n      .filter((el) => CODE_TITLE_REX.test(el?.innerText))\n      .forEach((el) => {\n        const [, fileName] = CODE_TITLE_REX.exec(el.innerText);\n\n        // Remove element before making changes\n        const code = el.parentNode;\n        code.removeChild(el);\n\n        // Remove newline\n        code.childNodes[0].splitText(1);\n        code.removeChild(code.childNodes[0]);\n\n        // Update DOM\n        el.innerText = fileName;\n        el.classList.add('pre-header');\n        const container = code.parentNode.parentNode;\n        container.insertBefore(el, container.firstChild);\n      });\n\n    if ('complete' in HTMLImageElement.prototype) {\n      main.querySelectorAll('img[width][height][loading=lazy]').forEach((el) => {\n        if (!el.complete) {\n          el.style.opacity = '0';\n          el.addEventListener(\n            'load',\n            () => {\n              el.style.opacity = '';\n            },\n            { once: true },\n          );\n        }\n      });\n    }\n\n    /*\n      requestIdleCallback(() => {\n        main.querySelectorAll(pushStateEl.linkSelector).forEach(anchor => {\n          caches.match(anchor.href).then(m => {\n            if (m) requestAnimationFrame(() => anchor.classList.add(\"visited\"));\n          });\n        });\n      });\n      */\n  });\n\n  after$\n    .pipe(\n      startWith({\n        replaceEls: [document.getElementById('_main')],\n        documentFragment: document,\n      }),\n    )\n    .subscribe(({ replaceEls: [main], documentFragment }) => {\n      const cEl = documentFragment.querySelector(CANONICAL_SEL);\n      if (canonicalEl && cEl) canonicalEl.href = cEl.href;\n\n      const mEl = documentFragment.querySelector(META_DESC_SEL);\n      if (metaDescEl && mEl) metaDescEl.content = mEl.content;\n\n      main.querySelectorAll(FN_SEL).forEach((li) => (li.tabIndex = 0));\n\n      main\n        .querySelectorAll(FN_LINK_SEL)\n        .forEach((a) =>\n          a.addEventListener('click', (e) =>\n            document.getElementById(e.currentTarget.getAttribute('href').substr(1))?.focus(),\n          ),\n        );\n\n      main\n        .querySelectorAll(HORIZONTAL_SCROLL_SEL)\n        .forEach((el) =>\n          el.addEventListener('touchstart', (e) => el.scrollLeft > 0 && e.stopPropagation(), { passive: false }),\n        );\n    });\n\n  const fadeIn$ = after$.pipe(switchMap(animateFadeIn), share());\n\n  const flip$ = setupFLIP(start$, ready$, merge(fadeIn$, error$), {\n    animationMain,\n    settings: SETTINGS,\n  }).pipe(share());\n\n  start$\n    .pipe(\n      switchMap((context) => {\n        const promise = zip(timer(DURATION), fadeOut$, flip$).toPromise();\n        context.transitionUntil(promise);\n        return promise;\n      }),\n    )\n    .subscribe();\n\n  // FIXME: Keeping permanent subscription? turn into hot observable?\n  fadeOut$.subscribe();\n  flip$.subscribe();\n\n  const sidebarBg = document.querySelector('.sidebar-bg');\n  if (sidebarBg) {\n    const crossFader = new CrossFader(FADE_DURATION);\n    after$\n      .pipe(\n        switchMap(({ replaceEls: [main] }) =>\n          zip(crossFader.fetchImage(main), fadeIn$).pipe(\n            map(([x]) => x),\n            takeUntil(start$),\n          ),\n        ),\n        startWith([sidebarBg]),\n        pairwise(),\n        mergeMap(([prev, curr]) => crossFader.fade(prev, curr)),\n      )\n      .subscribe();\n  }\n\n  fadeIn$\n    .pipe(\n      startWith({ main: document.getElementById('_main') }),\n      tap(({ main }) => {\n        const toc = main?.querySelector('#markdown-toc');\n        if (toc) {\n          toc.classList.remove('toc-hide');\n          toc.classList.add('toc-show');\n        }\n      }),\n    )\n    .subscribe();\n\n  error$\n    .pipe(\n      switchMap(({ url }) => {\n        if (loading) loading.style.display = 'none';\n\n        const main = document.getElementById('_main');\n        if (main) main.style.pointerEvents = '';\n        empty.call(animationMain?.querySelector('.page'));\n        empty.call(main);\n\n        setupErrorPage(main, url);\n\n        return animate(main, FADE_IN, { ...SETTINGS, fill: 'forwards' });\n      }),\n    )\n    .subscribe();\n\n  import(/* webpackMode: \"eager\" */ '@hydecorp/push-state');\n\n  window._pushState = pushStateEl;\n})();\n"],"sourceRoot":""}